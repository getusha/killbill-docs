<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 2.0.17"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"><link rel="preconnect" href="https://S2ISXITURI-dsn.algolia.net"><style type="text/css"></style><title>Catalog Examples</title><style>/*Default CSS*/

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */

@import "https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap";

*,
*::before,
*::after {
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

ul,
ol {
  padding: 0;
  list-style-type: none;
}

body,
h1,
h2,
h3,
h4,
p,
ul[class],
ol[class],
li,
figure,
figcaption,
blockquote,
dl,
dd {
  margin: 0;
}

body {
  min-height: 100vh;
  scroll-behavior: smooth;
  text-rendering: optimizeSpeed;
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  line-height: 150%;
  color: #374151;
  max-width: 100%;
  overflow-x: hidden;
}

ul[class],
ol[class] {
  list-style: none;
}

img {
  max-width: 100%;
  display: block;
}

img[align=center] {
  margin: 0 auto;
}

button {
  cursor: pointer;
}

input,
button,
textarea,
select {
  font: inherit;
}
a,
h2,
h3,
h4 {
  color: #167BB7;
}
h1,
h3,
h4 {
  font-weight: 400;
}
h1 {
  font-size: 40px;
  line-height: 120%;
  letter-spacing: -0.025em;
  color: #FFFFFF;
}
h2 {
  font-weight: 600;
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 16px;
}

.header {
  padding: 16px 0;
  background: #FFFFFF;
  box-shadow: 0 1px 3px rgba(0, 0, 0, .1), 0 1px 2px rgba(0, 0, 0, .06);
}
.header-wrapper .logo {
  max-width: 215px;
  margin: auto;
  width: 80%;
}
.header-wrapper .search-form-wrapper {
  flex-grow: 1;
}
.header-wrapper .search-form {
  position: relative;
}
.header-wrapper .search-form .algolia-autocomplete {
  width: 100%;
}
.header-wrapper .search-form input[type="search"] {
  width: 100%;
  padding: 9px 9px 9px 40px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
}
.header-wrapper .search-form .ds-dropdown-menu {
  max-width: none;
  width: 100%;
}
.header-wrapper .search-form .search-form-icon {
  position: absolute;
  left: 13px;
  top: 9px;
  z-index: 1;
  width: 20px;
  height: 20px;
  pointer-events: none;
}
.content-wrapper {
  padding: 24px 40px;
}


.content-wrapper .banner {
  position: relative;
  display: flex;
  align-items: center;
  min-height: 174px;
  margin-bottom: 24px;
  padding: 0 40px;
  background-color: #167BB7;
  border-radius: 8px;
}
.content-wrapper .banner .bg-image {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

.main {
  line-height: 1.5;
}

.main p {
  margin-bottom: 12px;
}

.main .sidebar {
  width: 100%;
  flex-shrink: 0;
  margin-right: 40px;
  position: sticky;
  top: 0;
}

.main .sidebar .icon-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 18px;
  cursor: pointer;
}

.main .sidebar .icon-title .left-part{
  display: flex;
  align-items: center;
}

.main .sidebar .icon-title .chevron, .main .sidebar .icon-title.bd-link-active-wrap .chevron.rotated {
  transform: rotate(180deg);
}

.main .sidebar .icon-title.bd-link-active-wrap .bd-toc-link {
  color: #167BB7;
}

.main .sidebar .icon-title .chevron.rotated, .main .sidebar .icon-title.bd-link-active-wrap .chevron{
  transform: rotate(0);
}

.main .sidebar .bd-link-active-wrap  .chevron path {
  fill: #D1D5DB;
}

.main .sidebar .bd-link-active-wrap svg path {
  fill: #167BB7;
}

.main .sidebar .icon-title svg {
  margin-right: 8px;
}

.main .sidebar-nav,
.main .right-side-menu
{
  overflow-y: scroll;
  height: 100vh;
  padding: 24px;
}

.main .sidebar-nav {
  background-color: #FBFDFF;
  margin-left: -15px;
}

.main .right-side-menu {
  direction: rtl;
  padding: 24px 0 0 10px;
}

.main .right-side-menu .navbar-nav {
  direction: ltr;
}

.main .sidebar-nav::-webkit-scrollbar,
.main .right-side-menu::-webkit-scrollbar
{
  width: 8px;
}

.main .sidebar-nav::-webkit-scrollbar-track,
.main .right-side-menu::-webkit-scrollbar-track
{
  background-color: #F3F4F6;
}

.main .sidebar-nav::-webkit-scrollbar-thumb,
.main .right-side-menu::-webkit-scrollbar-thumb
{
  background-color: #D1D5DB;
  width: 6px;
  border-radius: 32px;
}

.main .sidebar-nav a {
  color: #1F2937;
  font-size: 12px;
}

.main .sidebar-nav a.bd-toc-link {
  font-weight: 500;
  font-size: 14px;
  display: block;
}

pre.pygments .tok-o {
  color: #167BB7;
}

.main p code {
  color: #374151;
  font-size: 14px;
}

.main table,.main table td,.main table th {
  border: 1px solid #dedede;
  padding: 10px;
}

.main .note table,.main .note table td,.main .note table th {
  border: none;
}

.main .note .icon {
  width: 60px;
}

.main .note .icon .fa.icon-note {
  display: none;
}

.main .note .content {
  font-size: 14px;
  font-weight: normal;
  color: #374151;
}

.main table td.icon svg{
  width: 30px;
  height: auto;
}

.main table td.icon .title {
  display: none;
}

.main table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 15px;
}

.main table .title {
  text-transform: uppercase;
  font-weight: 600;
  padding: 0 5px;
}

pre.pygments .tok-o {
  color: #167BB7!important;
}

.main .sidebar-nav > ul li ul {
  display: none;
}

.main .sidebar-nav > ul li ul.active-list {
  display: block;
}

.main .sidebar-nav > ul li ul li a{
  display: block;
  position: relative;
  padding-left: 16px;
}

.main .sidebar-nav > ul li ul li a::before {
  content: ' ';
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  width: 2px;
  background-color: #EBEBEF;
}

.main .sidebar-nav > ul li ul li.list-item-active a::before {
  background-color: #167BB7;
}

.main .sidebar-nav > ul li ul li:first-child a::before {
  border-radius: 32px 32px 0px 0px;
}

.main .sidebar-nav > ul li ul li:last-child a::before {
  border-radius: 0px 0px 32px 32px;
}

.main .sidebar-nav > .navbar-nav  > li {
  margin-bottom: 26px;
}

.main .right-side-menu {
  position: sticky;
  top: 0;
  height: 100vh;
}

.main .right-side-menu > .navbar-nav {
  position: relative;
}

.main .right-side-menu > .navbar-nav:before {
  content: "In this document";
  display: block;
  color: #9CA3AF;
  font-size: 14px;
  padding-left: 10px;
}

.main .right-side-menu > ul > li > a {
  font-size: 14px;
  font-weight: 300;
  margin-bottom: 7px;
  padding: 4px 10px;
}

.main .right-side-menu > .navbar-nav .navbar-nav li a,
.main .right-side-menu > .navbar-nav li a{
  padding-left: 15px;
}

.main .right-side-menu .nav-link {
  border: none!important;
  color: #374151!important;
}

.main .right-side-menu .nav-link.active{
  color: #167BB7!important;
}

.main .right-side-menu .navbar-nav {
  display: block;
}

.main img {
  box-shadow: 0px 4px 6px -1px rgba(0, 0, 0, 0.1), 0px 2px 4px -1px rgba(0, 0, 0, 0.06);
  border-radius: 5px;
  margin-bottom: 24px;
  margin-top: 10px;
}

.main .note img {
  box-shadow: none;
  border-radius: 0;
  min-width: 40px;
  width: 40px;
  margin-bottom: 10px;
}

.main .imageblock img {
  height: auto;
}

.main .listingblock, .literalblock > .content pre {
  padding: 8px 14px;
  background: #50576A;
  border-radius: 4px;
  margin-bottom: 24px;
  font-size: 14px;
  font-weight: 400;
  color: #CECECE;
}

pre.pygments {
  background: #50576A!important;
  margin-bottom: 0;
}

.main .listingblock  .tok-nt {
  color: #29A9C9;
}

.main .listingblock .tok-s {
  color: #E44C3A;
}

.main .listingblock  .tok-p {
  color: #F5FBFF;
}

.main ol {
  counter-reset: my-awesome-counter;
  list-style: none;
  color: #167BB7;
  margin-left: 20px;
  margin-bottom: 16px;
}

.main ol > li {
  position: relative;
  counter-increment: my-awesome-counter;
  font-size: 10px;
  font-weight: 600;
}

.main ol> li::before {
  content: counter(my-awesome-counter);
  width: 22px;
  height: 22px;
  border: 1px solid #167BB7;
  border-radius: 50%;
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  top: 1px;
  left: -20px;
  background: transparent;
}

.main ol.arabic:first-child p {
  color: #374151;
  margin-left: 10px;
  font-size: 14px;
  font-weight: 400;
}

.main .content-wrapper ul{
  color: #374151;
  list-style: disc;
  margin-left: 20px;
}

.main .content-wrapper ul > li ul {
  list-style: circle;
}

.main .content-wrapper ul.nav-tabs{
  list-style: none;
}

.main .content-wrapper ol.loweralpha {
  list-style: none;
}

.main ol.loweralpha > li::before {
  content: ' ';
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background-color: #374151;
  border: none;
  left: -5px;
  top: 8px;
}


.main h2, .main h3 {
  margin-bottom: 16px;
  padding-top: 24px;
}

.main h4 {
  margin-bottom: 16px;
  padding-top: 16px;
}

.content-wrapper h2 a, .content-wrapper h3 a, .content-wrapper h4 a {
  display: none;
  margin-left: 5px;
}

.content-wrapper h4 a svg {
  height: 14px;
  width: auto;
}

.content-wrapper h2:hover a, .content-wrapper h3:hover a, .content-wrapper h4:hover a {
  display: inline;
}

.breadcrumbs-wrapper {
  margin-bottom: 24px;
}
.breadcrumbs-list {
  display: flex;
  align-items: center;
}
.breadcrumbs-list li {
  display: flex;
  align-items: center;
}
.breadcrumbs-list li:not(:last-of-type):after {
  content: '/';
  margin-left: 6px;
  margin-right: 6px;
}
.breadcrumbs-list a {
  display: flex;
  align-items: center;
  letter-spacing: -0.025em;
  color: #374151;
}
.breadcrumbs-list a svg {
  width: 24px;
  height: 24px;
  margin-right: 4px;
}

.note table code {
  color: #374151;
}

.banner .absolute-figure {
  position: absolute;
}

.banner .absolute-figure.abstract-figure {
  right: 0;
}

.banner .absolute-figure.circle2 {
  right: 30%;
  top: 10%;
}

.banner .absolute-figure.circle3 {
  right: 15%;
  top: 10%;
}

.banner .absolute-figure.circle4 {
  left: 5%;
  top: 10%;
}

.banner .absolute-figure.circle5 {
  left: 30%;
}

.banner .absolute-figure.circle6 {
  left: 6%;
  bottom: 0;
}

.banner .absolute-figure.circle7 {
  left: 35%;
  bottom: 15%;
}

.banner .absolute-figure.circle8 {
  left: 55%;
  bottom: 0;
}

.banner .absolute-figure.circle9 {
  bottom: 0;
  right: 0;
}

.doclink {
  position: fixed;
  bottom: 0;
  padding: 0 15px 10px;
  background-color: #FBFDFF;
  z-index: 1000;
  font-size: 12px;
}

.btn-primary, .btn-primary:hover {
  background-color: #167BB7;
  border-color: #167BB7;
}

.card-wrapper .card-text {
  min-height: 80px;
}

.card-wrapper .card-body {
  padding: 1.25rem 0.25rem;
}

pre.pygments .tok-c1 {
  color: #29A9C9!important;
}

@media screen and (max-width: 1520px) {
  .card-wrapper .card-text {
    min-height: 110px;
  }
}

.DocSearch.DocSearch-Button {
    margin-left: 0;
    width: 100%;
    height: 44px;
    padding: 0 22px;
}

.DocSearch-Hit-content-wrapper {
  overflow-x: inherit !important;
}
.warning table td, .warning table,
.important table td, .important table {
  border: none;
}
.copy-icon {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  height: 40px;
  margin: -8px -14px 8px;
  padding: 0 16px;
  background-color: #3C4356;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
}
.copy-icon svg {
  cursor: pointer;
}
.main table td.icon {
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
}
.icon-warning {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='554.2' height='554.199' xml:space='preserve' fill='%23E44C3A'%3E%3Cpath d='M538.5 386.199 356.5 70.8a91.803 91.803 0 0 0-79.501-45.9c-32.8 0-63.1 17.5-79.5 45.9L12.3 391.6a91.793 91.793 0 0 0 0 91.8c16.4 28.4 46.7 45.9 79.5 45.9H462.4c50.7 0 91.8-41.101 91.8-91.8 0-19-5.8-36.7-15.7-51.301zm-222.2 30.7c0 21.7-16.7 38.3-39.2 38.3s-39.2-16.6-39.2-38.3V416c0-21.601 16.7-38.301 39.2-38.301S316.3 394.3 316.3 416v.899zm.9-258.199-19.4 169.4c-1.3 12.2-9.4 19.8-20.7 19.8s-19.4-7.7-20.7-19.8L237 158.6c-1.3-13.1 5.801-23 18-23h44.1c12.2.1 19.4 10 18.1 23.1z'/%3E%3C/svg%3E%0A");
  width: 40px;
  height: 39px;
  background-size: 100%;
}
.icon-important {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Cg transform='scale(.521)'%3E%3Ccircle cx='96' cy='96' r='74' fill='%23E44C3A'/%3E%3Cpath d='M86 48h20l-4 72H90z' fill='%23fff'/%3E%3Ccircle cx='96' cy='140' r='10' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E");
  width: 40px;
  height: 40px;
  background-size: 100%;
}
</style>
<style>pre.pygments .hll { background-color: #49483e }
pre.pygments { background: #272822; color: #f8f8f2 }
pre.pygments .tok-c { color: #75715e } /* Comment */
pre.pygments .tok-err { color: #960050; background-color: #1e0010 } /* Error */
pre.pygments .tok-k { color: #66d9ef } /* Keyword */
pre.pygments .tok-l { color: #ae81ff } /* Literal */
pre.pygments .tok-n { color: #f8f8f2 } /* Name */
pre.pygments .tok-o { color: #f92672 } /* Operator */
pre.pygments .tok-p { color: #f8f8f2 } /* Punctuation */
pre.pygments .tok-ch { color: #75715e } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #75715e } /* Comment.Multiline */
pre.pygments .tok-cp { color: #75715e } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #75715e } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #75715e } /* Comment.Single */
pre.pygments .tok-cs { color: #75715e } /* Comment.Special */
pre.pygments .tok-gd { color: #f92672 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gi { color: #a6e22e } /* Generic.Inserted */
pre.pygments .tok-go { color: #66d9ef } /* Generic.Output */
pre.pygments .tok-gp { color: #f92672; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #75715e } /* Generic.Subheading */
pre.pygments .tok-kc { color: #66d9ef } /* Keyword.Constant */
pre.pygments .tok-kd { color: #66d9ef } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #f92672 } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #66d9ef } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #66d9ef } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #66d9ef } /* Keyword.Type */
pre.pygments .tok-ld { color: #e6db74 } /* Literal.Date */
pre.pygments .tok-m { color: #ae81ff } /* Literal.Number */
pre.pygments .tok-s { color: #e6db74 } /* Literal.String */
pre.pygments .tok-na { color: #a6e22e } /* Name.Attribute */
pre.pygments .tok-nb { color: #f8f8f2 } /* Name.Builtin */
pre.pygments .tok-nc { color: #a6e22e } /* Name.Class */
pre.pygments .tok-no { color: #66d9ef } /* Name.Constant */
pre.pygments .tok-nd { color: #a6e22e } /* Name.Decorator */
pre.pygments .tok-ni { color: #f8f8f2 } /* Name.Entity */
pre.pygments .tok-ne { color: #a6e22e } /* Name.Exception */
pre.pygments .tok-nf { color: #a6e22e } /* Name.Function */
pre.pygments .tok-nl { color: #f8f8f2 } /* Name.Label */
pre.pygments .tok-nn { color: #f8f8f2 } /* Name.Namespace */
pre.pygments .tok-nx { color: #a6e22e } /* Name.Other */
pre.pygments .tok-py { color: #f8f8f2 } /* Name.Property */
pre.pygments .tok-nt { color: #f92672 } /* Name.Tag */
pre.pygments .tok-nv { color: #f8f8f2 } /* Name.Variable */
pre.pygments .tok-ow { color: #f92672 } /* Operator.Word */
pre.pygments .tok-w { color: #f8f8f2 } /* Text.Whitespace */
pre.pygments .tok-mb { color: #ae81ff } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #ae81ff } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #ae81ff } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #ae81ff } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #ae81ff } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #e6db74 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #e6db74 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #e6db74 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #e6db74 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #e6db74 } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #e6db74 } /* Literal.String.Double */
pre.pygments .tok-se { color: #ae81ff } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #e6db74 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #e6db74 } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #e6db74 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #e6db74 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #e6db74 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #e6db74 } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #a6e22e } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #f8f8f2 } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #f8f8f2 } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #f8f8f2 } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #f8f8f2 } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #ae81ff } /* Literal.Number.Integer.Long */</style></head><body data-spy="scroll" data-target="#toc" class="book"><header class="header"><div class="header-wrapper"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2"><div class="logo"><a href="https://docs.killbill.io"><img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/logo.png" style="height:41px" alt="KillBill Docs"></a></div></div><div class="col-12 col-md-9 col-xl-8"><div class="search-form-wrapper"><div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;"></div></div></div></div></div></div></header><main class="main"><div class="container-fluid"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2"><aside class="sidebar"><nav class="sidebar-nav"><ul class="nav navbar-nav"><li><div class="icon-title"><div class="left-part"><svg width="10" height="14" viewBox="0 0 10 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.90917 4.38381C7.48877 4.71836 7.68958 5.46766 7.35422 6.04827C7.01967 6.62787 6.27159 6.82767 5.69077 6.49313C5.11238 6.15878 4.91036 5.41069 5.24491 4.83008C5.58027 4.25028 6.32957 4.04947 6.90917 4.38381ZM6.37381 1.42682C5.15844 2.43471 4.17924 3.6026 3.49318 4.9216C2.6261 6.58828 2.636 7.89395 2.68287 9.01315C2.69054 9.18244 2.70408 9.33517 2.72186 9.478L3.06913 9.67901L3.70671 8.34829C3.82348 8.08627 4.03177 7.8495 4.37157 7.89172L3.0154 10.5251C2.87135 10.7976 3.33116 11.0691 3.51095 10.8113L3.94773 10.1861L4.54086 10.5281C4.68066 10.4764 4.82814 10.4166 4.98713 10.3439C6.00633 9.87679 7.12371 9.18446 8.12635 7.59697C8.94777 6.29656 9.5003 4.76463 9.71303 3.35492C9.11646 3.2434 8.4914 3.0139 7.88534 2.6638C7.27967 2.31471 6.76836 1.88743 6.37381 1.42682Z" fill="#D1D5DB"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.00529 8.78265C8.02732 8.90811 8.0455 9.02064 8.06327 9.14145C8.20025 10.1031 8.10226 10.7689 7.75196 11.3384C7.26791 12.1251 6.42306 12.6134 5.47962 13.1582C5.29739 13.2613 5.07133 13.1245 5.08183 12.9154L5.17739 10.8964C6.19578 10.6122 7.13135 9.9063 8.00529 8.78265Z" fill="#D1D5DB"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.39098 0.0548899C9.24775 0.0138795 9.10815 0.0559002 8.98371 0.0886278C8.22936 0.285599 7.52147 0.626208 6.86914 1.06601C7.21197 1.4551 7.65905 1.82783 8.19057 2.13491C8.72289 2.44198 9.26775 2.64299 9.77603 2.74501C9.83058 1.95915 9.77179 1.1753 9.56573 0.424388C9.53179 0.300953 9.49724 0.157921 9.39098 0.0548899Z" fill="#D1D5DB"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5275 5.62018C2.4075 5.6622 2.30022 5.70321 2.18648 5.74967C1.28587 6.11129 0.757784 6.52907 0.440004 7.11615C0.00100999 7.92929 0 8.90445 0 9.99456C0.00101011 10.2041 0.233739 10.3313 0.409296 10.2176L2.10931 9.12465C1.84668 8.10202 1.99072 6.93837 2.5275 5.62018Z" fill="#D1D5DB"/><path d="M2.16122 9.85376C1.46162 10.2578 1.0198 11.0194 0.863028 11.7982C0.706461 12.5776 1.00586 13.6433 1.41233 13.8778C1.81799 14.1114 2.89032 13.839 3.48689 13.3132C4.08366 12.7879 4.52225 12.0253 4.52225 11.2162L4.09518 10.9699C4.07821 12.0758 2.70628 13.0237 1.94243 12.9596C1.50485 12.3303 1.6394 10.6681 2.58971 10.1L2.16122 9.85376Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Getting Started</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li><a class="nav-link" href="/latest/what_is_kill_bill.html">What is Kill Bill?</a></li><li><a class="nav-link" href="/latest/getting_started.html">Quick Start</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="17" height="14" viewBox="0 0 17 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8468 6.75106L8.27233 10.4574C8.20425 10.5128 8.10212 10.5681 7.99999 10.5681C7.89787 10.5681 7.79574 10.5404 7.72765 10.4574L4.15319 6.75106C4.0851 6.66808 4.05106 6.55745 4.11914 6.44681C4.18723 6.33617 4.28936 6.30851 4.42553 6.30851H6.12765V0.776596C6.12765 0.610638 6.26382 0.5 6.46808 0.5H9.53191C9.73616 0.5 9.87233 0.610638 9.87233 0.776596V6.30851H11.5745C11.7106 6.30851 11.8128 6.36383 11.8808 6.47447C11.9489 6.58511 11.9149 6.66808 11.8468 6.75106Z" fill="#D1D5DB"/><path d="M16.3404 11.0107V13.2234C16.3404 13.3894 16.2043 13.5 16 13.5H0.340426C0.13617 13.5 0 13.3894 0 13.2234V11.0107C0 10.8447 0.13617 10.7341 0.340426 10.7341H16C16.2043 10.7341 16.3404 10.8447 16.3404 11.0107Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Installation</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg></div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/aws.html">AWS Development</a></li><li><a class="nav-link" href="/latest/stripe_plugin.html">Kill Bill + Stripe DIY</a></li><li><a class="nav-link" href="/latest/userguide_deployment.html">Going to Production</a></li><li><a class="nav-link" href="/latest/database_migrations.html">Database Migrations</a></li><li><a class="nav-link" href="/latest/PostgreSQL.html">PostgreSQL Setup</a></li><li><a class="nav-link" href="https://github.com/killbill/killbill/releases" onclick="getOutboundLink('https://github.com/killbill/killbill/releases'); return false;">Release&nbsp;Notes</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.35868 0.5C0.606463 0.5 0 1.17607 0 2.01667V11.9833C0 12.8239 0.606463 13.5 1.35868 13.5H10.9191C11.3384 13.5 11.7131 13.2901 11.9618 12.9583H1.21424C0.819297 12.9583 0.501042 12.6094 0.501042 12.1774V11.0309C0.501042 10.599 0.819297 10.25 1.21424 10.25H12.2778V2.01667C12.2778 1.17607 11.6713 0.5 10.9191 0.5H1.35868ZM6.13889 2.00313C6.47622 2.00313 6.74826 2.30735 6.74826 2.68924V3.00069C6.90076 3.04556 7.04926 3.10578 7.18611 3.18125L7.40729 2.96007C7.54231 2.82505 7.71081 2.75369 7.87674 2.7434C8.04266 2.73312 8.20435 2.78664 8.32361 2.9059C8.56214 3.14443 8.53948 3.5567 8.26944 3.82674L8.05278 4.0434C8.1282 4.18032 8.18399 4.3287 8.22882 4.48125H8.54028C8.92216 4.48125 9.2309 4.7533 9.2309 5.09063C9.2309 5.42796 8.92216 5.7 8.54028 5.7H8.22882C8.18378 5.85322 8.12417 6.00042 8.04826 6.13785L8.26944 6.35903C8.53948 6.62907 8.56214 7.03684 8.32361 7.27536C8.08508 7.51389 7.67732 7.49123 7.40729 7.22119L7.18611 7C7.04861 7.07596 6.90158 7.14003 6.74826 7.18508V7.49202C6.74826 7.87391 6.47622 8.18264 6.13889 8.18264C5.80156 8.18264 5.52951 7.87391 5.52951 7.49202V7.18508C5.37616 7.14003 5.22922 7.07596 5.09167 7L4.87049 7.22119C4.60045 7.49123 4.1927 7.51389 3.95417 7.27536C3.71564 7.03684 3.7383 6.62907 4.00833 6.35903L4.22951 6.13785C4.15354 6.00042 4.09404 5.85322 4.04896 5.7H3.7375C3.35562 5.7 3.04687 5.42796 3.04687 5.09063C3.04687 4.7533 3.35562 4.48125 3.7375 4.48125H4.04896C4.09383 4.3287 4.14952 4.18032 4.225 4.0434L4.00833 3.82674C3.7383 3.5567 3.71564 3.14443 3.95417 2.9059C4.05852 2.80154 4.19405 2.74834 4.33785 2.7434C4.52272 2.73705 4.71859 2.80818 4.87049 2.96007L5.09167 3.18125C5.22858 3.10578 5.37698 3.04556 5.52951 3.00069V2.68924C5.52951 2.30735 5.80156 2.00313 6.13889 2.00313ZM6.13889 3.81319C5.42639 3.81319 4.85694 4.37813 4.85694 5.09063C4.85694 5.80311 5.42639 6.37257 6.13889 6.37257C6.85138 6.37257 7.42083 5.80311 7.42083 5.09063C7.42083 4.37813 6.85138 3.81319 6.13889 3.81319Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Manuals</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/userguide_subscription.html">Subscription&nbsp;Billing</a></li><li><a class="nav-link" href="/latest/userguide_payment.html">Payment Processing</a></li><li><a class="nav-link" href="/latest/userguide_kaui.html">Kaui, the Administrative&nbsp;UI</a></li><li><a class="nav-link" href="/latest/email-notification-plugin.html">Email Notification Plugin</a></li><li><a class="nav-link" href="/latest/custom-email-invoice-formatter.html">Custom Email Formatter</a></li><li><a class="nav-link" href="/latest/userguide_analytics.html">Analytics Plugin</a></li><li><a class="nav-link" href="/latest/userguide_configuration.html">Kill Bill&nbsp;Configuration</a></li><li><a class="nav-link" href="/latest/internationalization.html">Kill Bill&nbsp;Internationalization</a></li><li><a class="nav-link" href="/latest/migration_guide.html">Migrating to Kill Bill</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.49995 13.5C2.91587 13.5 0 10.5841 0 7C0 3.41587 2.91587 0.5 6.49995 0.5C8.45326 0.5 10.2851 1.36667 11.5258 2.8778C11.7667 3.17111 11.7241 3.60417 11.4308 3.84503C11.1375 4.08589 10.7044 4.04334 10.4635 3.74997C9.48493 2.55805 8.04027 1.87445 6.5 1.87445C3.67374 1.87445 1.37445 4.17374 1.37445 7C1.37445 9.82626 3.67374 12.1255 6.49995 12.1255C8.27513 12.1255 9.89929 11.2265 10.8446 9.7207C11.0464 9.39919 11.4707 9.30215 11.792 9.50403C12.1135 9.70586 12.2104 10.13 12.0086 10.4514C10.8104 12.3604 8.75102 13.5 6.49995 13.5Z" fill="#D1D5DB"/><path d="M5.61713 4.03134L9.16228 6.99994L5.61713 9.69408V4.03134Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Tutorials</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plan_alignment.html">Plans Alignments</a></li><li><a class="nav-link" href="/latest/overdue.html">Overdue System</a></li><li><a class="nav-link" href="/latest/consumable_in_arrear.html">In Arrear UsageBilling</a></li><li><a class="nav-link" href="/latest/ha.html">Hierarchical Accounts</a></li><li><a class="nav-link" href="/latest/catalog-examples.html">Catalog Examples </a></li><li><a class="nav-link" href="/latest/invoice_examples.html">Invoice Examples               </a></li><li><a class="nav-link" href="/latest/invoice_templates.html">Invoice Templates</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.57375 4.2212C5.57375 3.55495 5.7525 2.93745 6.06125 2.38495C5.89875 2.3687 5.73625 2.35245 5.57375 2.35245C2.5025 2.35245 0 4.85495 0 7.9262C0 10.9974 2.5025 13.4999 5.57375 13.4999C8.645 13.4999 11.1475 10.9974 11.1475 7.9262C11.1475 7.7637 11.1313 7.6012 11.115 7.4387C10.5788 7.74745 9.945 7.9262 9.27875 7.9262C7.23125 7.9262 5.57375 6.2687 5.57375 4.2212Z" fill="#D1D5DB"/><path d="M12.9999 4.22131C12.9999 2.15756 11.3424 0.500061 9.27867 0.500061C7.89742 0.500061 6.69492 1.26381 6.04492 2.38506C8.74242 2.61256 10.8874 4.75756 11.1149 7.43881C12.2362 6.80506 12.9999 5.60256 12.9999 4.22131Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Integration</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="http://killbill.github.io/slate" onclick="getOutboundLink('http://killbill.github.io/slate'); return false;">REST API Reference</a></li><li><a class="nav-link" href="/latest/swagger_documentation.html">Swagger UI Documentation</a></li><li><a class="nav-link" href="/latest/postman.html">Postman Integration</a></li><li><a class="nav-link" href="/latest/debugging.html">Debugging</a></li><li><a class="nav-link" href="/latest/push_notifications.html">Push Notifications</a></li><li><a class="nav-link" href="/latest/kill_bill_events.html">Kill Bill Events</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="16" height="10" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.598381 4.97132L7.58645 7.95203C7.70867 8.00387 7.84006 8.03059 7.97282 8.03061C8.10557 8.03062 8.23697 8.00393 8.3592 7.95213L15.3398 4.97441C15.5165 4.89902 15.6673 4.77357 15.7736 4.61353C15.8799 4.45349 15.9371 4.26585 15.9381 4.07372C15.9391 3.88159 15.8838 3.69337 15.7791 3.53225C15.6745 3.37113 15.525 3.24415 15.349 3.16696L8.32017 0.0827333C8.19473 0.0278808 8.05926 -0.000292665 7.92236 2.29226e-06C7.78545 0.00029725 7.65011 0.0290541 7.52491 0.0844465L0.585304 3.1655C0.41 3.24329 0.261228 3.37058 0.157256 3.53174C0.0532838 3.6929 -0.00136296 3.88091 2.58277e-05 4.07269C0.00141462 4.26448 0.0587786 4.45168 0.165074 4.61132C0.271369 4.77095 0.421969 4.89607 0.598381 4.97132Z" fill="#D1D5DB"/><path d="M15.2045 5.24602L8.43625 8.13319C8.28965 8.19539 8.13202 8.22745 7.97276 8.22745C7.8135 8.22745 7.65587 8.19539 7.50926 8.13319L0.734671 5.24342C0.664526 5.21351 0.587206 5.2046 0.512096 5.21778C0.436987 5.23096 0.367319 5.26566 0.311548 5.31767C0.192258 5.42962 0.102749 5.56954 0.0511137 5.72477C-0.000521577 5.88 -0.0126555 6.04566 0.0158087 6.20676C0.0442728 6.36786 0.112438 6.51933 0.214141 6.64747C0.315844 6.77561 0.44788 6.87638 0.598311 6.94068L7.58638 9.9214C7.7086 9.97323 7.83999 9.99996 7.97275 9.99997C8.1055 9.99999 8.2369 9.9733 8.35913 9.92149L15.3397 6.94377C15.4901 6.87948 15.6222 6.77873 15.724 6.65062C15.8257 6.52251 15.894 6.37107 15.9226 6.20998C15.9512 6.04889 15.9392 5.88322 15.8877 5.72792C15.8362 5.57262 15.7469 5.43258 15.6278 5.32044C15.572 5.26841 15.5023 5.23368 15.4272 5.22047C15.352 5.20726 15.2747 5.21613 15.2045 5.24602Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Plugin Development</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_introduction.html">Plugin Introduction</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_development.html">Plugin Development</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/plugin_installation.html">Plugin Installation</a></li><li><a class="nav-link" href="/latest/plugin_use_cases.html">Special Plugin Use Cases</a></li><li><a class="nav-link" href="/latest/notification_plugin.html">Notification Plugins</a></li><li><a class="nav-link" href="/latest/payment_plugin.html">Payment Plugins</a></li><li><a class="nav-link" href="/latest/payment_control_plugin.html">Payment Control Plugins</a></li><li><a class="nav-link" href="/latest/invoice_plugin.html">Invoice Plugins</a></li><li><a class="nav-link" href="/latest/catalog_plugin.html">Catalog Plugins</a></li><li><a class="nav-link" href="/latest/entitlement_plugin.html">Entitlement Plugins</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.8125 1.43854L0 2.65295V12.9273L0.8125 12.1148V1.43854Z" fill="#D1D5DB"/><path d="M1.38532 12.6875L0.572815 13.5H8.41751C8.15229 13.2676 7.92719 12.9931 7.75126 12.6875H1.38532Z" fill="#D1D5DB"/><path d="M7.3125 11.0625C7.31412 10.2712 7.60357 9.50761 8.12684 8.91407C8.6501 8.32054 9.37144 7.93766 10.1562 7.83687V0.5H1.625V11.875H7.41406C7.34709 11.6093 7.31298 11.3365 7.3125 11.0625ZM2.4375 6.59375V1.71875C2.43782 1.6111 2.48072 1.50796 2.55684 1.43184C2.63296 1.35572 2.7361 1.31282 2.84375 1.3125H8.9375C9.04515 1.31282 9.14829 1.35572 9.22441 1.43184C9.30053 1.50796 9.34343 1.6111 9.34375 1.71875V6.59375C9.34343 6.7014 9.30053 6.80454 9.22441 6.88066C9.14829 6.95678 9.04515 6.99968 8.9375 7H2.84375C2.7361 6.99968 2.63296 6.95678 2.55684 6.88066C2.48072 6.80454 2.43782 6.7014 2.4375 6.59375Z" fill="#D1D5DB"/><path d="M10.9688 8.66155C10.7001 8.61282 10.4249 8.61282 10.1563 8.66155C9.58834 8.7567 9.07257 9.05017 8.70064 9.48979C8.32872 9.9294 8.12476 10.4867 8.12501 11.0625C8.12429 11.3396 8.17241 11.6146 8.26718 11.875C8.36841 12.1773 8.53326 12.4543 8.75063 12.6875C9.11573 13.1004 9.61229 13.3745 10.1563 13.4634C10.4249 13.5122 10.7001 13.5122 10.9688 13.4634C11.5366 13.368 12.0522 13.0745 12.4241 12.6349C12.7959 12.1954 13 11.6383 13 11.0625C13 10.4867 12.7959 9.92959 12.4241 9.49003C12.0522 9.05047 11.5366 8.75693 10.9688 8.66155ZM10.9688 12.2812C10.9688 12.389 10.926 12.4923 10.8498 12.5685C10.7736 12.6447 10.6703 12.6875 10.5625 12.6875C10.4548 12.6875 10.3514 12.6447 10.2752 12.5685C10.1991 12.4923 10.1563 12.389 10.1563 12.2812V11.0625C10.1563 10.9548 10.1991 10.8514 10.2752 10.7752C10.3514 10.6991 10.4548 10.6563 10.5625 10.6563C10.6703 10.6563 10.7736 10.6991 10.8498 10.7752C10.926 10.8514 10.9688 10.9548 10.9688 11.0625V12.2812ZM10.9606 9.925C10.9562 9.95046 10.948 9.97511 10.9363 9.99812C10.9274 10.024 10.9151 10.0486 10.8997 10.0712L10.851 10.1322C10.7731 10.2064 10.6701 10.2484 10.5625 10.25C10.5353 10.2493 10.5081 10.2466 10.4813 10.2419C10.4558 10.2375 10.4311 10.2292 10.4081 10.2175C10.3822 10.2086 10.3576 10.1963 10.335 10.1809L10.2741 10.1322L10.2253 10.0712C10.2099 10.0486 10.1976 10.024 10.1888 9.99812C10.177 9.97511 10.1688 9.95046 10.1644 9.925C10.1597 9.89816 10.157 9.871 10.1563 9.84375C10.1569 9.79066 10.1679 9.7382 10.1888 9.68937C10.2094 9.64016 10.2382 9.59482 10.2741 9.55531C10.3313 9.49905 10.4038 9.46094 10.4826 9.44576C10.5614 9.43059 10.6429 9.43902 10.7169 9.47C10.7673 9.48829 10.813 9.51741 10.8509 9.55532C10.8889 9.59323 10.918 9.63899 10.9363 9.68939C10.9571 9.73822 10.9682 9.79067 10.9688 9.84377C10.9681 9.87101 10.9653 9.89816 10.9606 9.925Z" fill="#D1D5DB"/><path d="M3.25 6.1875H8.53125V2.125H3.25V6.1875ZM4.46875 2.9375H7.3125C7.42024 2.9375 7.52358 2.9803 7.59976 3.05649C7.67595 3.13267 7.71875 3.23601 7.71875 3.34375C7.71875 3.45149 7.67595 3.55483 7.59976 3.63101C7.52358 3.7072 7.42024 3.75 7.3125 3.75H4.46875C4.36101 3.75 4.25767 3.7072 4.18149 3.63101C4.1053 3.55483 4.0625 3.45149 4.0625 3.34375C4.0625 3.23601 4.1053 3.13267 4.18149 3.05649C4.25767 2.9803 4.36101 2.9375 4.46875 2.9375ZM4.46875 4.5625H7.3125C7.42024 4.5625 7.52358 4.6053 7.59976 4.68149C7.67595 4.75767 7.71875 4.86101 7.71875 4.96875C7.71875 5.07649 7.67595 5.17983 7.59976 5.25601C7.52358 5.3322 7.42024 5.375 7.3125 5.375H4.46875C4.36101 5.375 4.25767 5.3322 4.18149 5.25601C4.1053 5.17983 4.0625 5.07649 4.0625 4.96875C4.0625 4.86101 4.1053 4.75767 4.18149 4.68149C4.25767 4.6053 4.36101 4.5625 4.46875 4.5625Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Operational Guides</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/deploy_to_kubernetes.html">Kubernetes (K8s) Deployment</a></li><li class="bd-sidenav-active"><a class="nav-link" href="/latest/user_management.html">Users, Roles, and Permissions</a></li><li><a class="nav-link" href="/latest/plugin_management.html">Plugin Management</a></li><li><a class="nav-link" href="/latest/aws-tools.html">AWS Analytics Tools</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.76912 2.78244C1.76912 2.33102 1.90298 1.88973 2.15378 1.51439C2.40458 1.13904 2.76105 0.846493 3.17811 0.673741C3.59517 0.500989 4.0541 0.455789 4.49685 0.543858C4.9396 0.631927 5.34629 0.849309 5.6655 1.16851C5.9847 1.48772 6.20209 1.89441 6.29015 2.33716C6.37822 2.77991 6.33302 3.23884 6.16027 3.6559C5.98752 4.07296 5.69497 4.42943 5.31962 4.68023C4.94428 4.93103 4.50299 5.06489 4.05157 5.06489C3.75183 5.06489 3.45503 5.00586 3.17811 4.89115C2.90119 4.77645 2.64957 4.60833 2.43763 4.39638C2.22568 4.18443 2.05756 3.93282 1.94286 3.6559C1.82815 3.37898 1.76912 3.08218 1.76912 2.78244ZM13 12.4292C13 10.5255 11.0766 8.98227 8.70388 8.98227C6.33121 8.98227 4.40776 10.5255 4.40776 12.4292C4.40776 13.1431 6.55582 13.5 8.70388 13.5C10.8519 13.5 13 13.1431 13 12.4292ZM4.05157 10.0356C4.33129 10.0356 4.61081 10.0289 4.88519 10.0161C5.63217 9.24511 6.60633 8.73355 7.66506 8.55627C7.15108 8.36153 6.70189 8.02679 6.36832 7.58995C6.03475 7.15311 5.83013 6.63161 5.77762 6.0845C5.22568 5.87794 4.64089 5.77307 4.05157 5.77497C1.81395 5.77497 0 7.23039 0 9.02568C0 9.69892 2.02578 10.0356 4.05157 10.0356ZM8.70388 8.22931C9.18255 8.22931 9.65047 8.08737 10.0485 7.82143C10.4465 7.55549 10.7567 7.1775 10.9399 6.73527C11.123 6.29303 11.171 5.80641 11.0776 5.33693C10.9842 4.86746 10.7537 4.43622 10.4152 4.09775C10.0767 3.75928 9.6455 3.52878 9.17602 3.43539C8.70655 3.34201 8.21993 3.38994 7.77769 3.57312C7.33546 3.7563 6.95747 4.0665 6.69154 4.46451C6.4256 4.86251 6.28366 5.33043 6.28366 5.8091C6.28366 6.12693 6.34626 6.44164 6.46789 6.73528C6.58951 7.02891 6.76779 7.29572 6.99253 7.52045C7.21726 7.74519 7.48407 7.92346 7.7777 8.04509C8.07134 8.16671 8.38605 8.22931 8.70388 8.22931Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Client Libraries</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/java_client.html">Java</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-ruby" onclick="getOutboundLink('http://github.com/killbill/killbill-client-ruby'); return false;">Ruby</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-php" onclick="getOutboundLink('http://github.com/killbill/killbill-client-php'); return false;">PHP</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-js" onclick="getOutboundLink('http://github.com/killbill/killbill-client-js'); return false;">Node.js</a></li><li><a class="nav-link" href="http://github.com/killbill/killbill-client-python" onclick="getOutboundLink('http://github.com/killbill/killbill-client-python'); return false;">Python</a></li><li><a class="nav-link" href="http://github.com/killbill/kbcli" onclick="getOutboundLink('http://github.com/killbill/kbcli'); return false;">Go</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.41355 4.58645C7.0354 4.208 6.53345 4 6 4C4.8972 4 4 4.89695 4 6C4 7.10305 4.8972 8 6 8C7.1028 8 8 7.10305 8 6C8 5.4668 7.79175 4.96435 7.41355 4.58645Z" fill="#D1D5DB"/><path d="M10.5772 9.8704C11.463 8.8246 12 7.47465 12 6C12 4.52535 11.463 3.1754 10.5772 2.1296L11.1267 1.5801C11.2243 1.48245 11.2243 1.3242 11.1267 1.22655L10.7732 0.8731C10.6756 0.77545 10.5173 0.77545 10.4196 0.8731L9.87015 1.4226C8.8244 0.53695 7.4745 0 6 0C4.5255 0 3.1756 0.53695 2.1298 1.4226L1.58035 0.8731C1.4827 0.77545 1.3244 0.77545 1.22675 0.8731L0.87325 1.22655C0.7756 1.3242 0.7756 1.48245 0.87325 1.5801L1.4227 2.1296C0.537 3.1754 0 4.52535 0 6C0 7.47465 0.537 8.8246 1.42275 9.8704L0.8733 10.4199C0.77565 10.5175 0.77565 10.6758 0.8733 10.7734L1.2268 11.127C1.32445 11.2246 1.4827 11.2246 1.5804 11.127L2.12985 10.5774C3.1756 11.463 4.5255 12 6 12C7.4745 12 8.8244 11.463 9.8702 10.5774L10.4197 11.1269C10.5173 11.2245 10.6756 11.2245 10.7732 11.1269L11.1267 10.7734C11.2244 10.6758 11.2244 10.5175 11.1267 10.4199L10.5772 9.8704ZM6 11C4.8012 11 3.70025 10.5752 2.83795 9.86915L3.70165 9.00535C3.7993 8.9077 3.7993 8.74945 3.70165 8.6518L3.34815 8.29835C3.2505 8.2007 3.09225 8.2007 2.99455 8.29835L2.13085 9.16215C1.42485 8.29985 1 7.1988 1 6C1 4.8012 1.4248 3.70015 2.1309 2.83785L2.9946 3.70165C3.09225 3.7993 3.25055 3.7993 3.3482 3.70165L3.7017 3.34815C3.79935 3.2505 3.79935 3.09225 3.7017 2.9946L2.83795 2.13085C3.70025 1.42485 4.8012 1 6 1C7.1988 1 8.29975 1.42485 9.16205 2.13085L8.29835 2.9946C8.2007 3.09225 8.2007 3.2505 8.29835 3.34815L8.65185 3.70165C8.7495 3.7993 8.90775 3.7993 9.00545 3.70165L9.86915 2.83785C10.5752 3.70015 11 4.8012 11 6C11 7.1988 10.5751 8.29985 9.8691 9.16215L9.0054 8.29835C8.90775 8.2007 8.74945 8.2007 8.6518 8.29835L8.2983 8.6518C8.20065 8.74945 8.20065 8.9077 8.2983 9.00535L9.162 9.86915C8.29975 10.5752 7.1988 11 6 11Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">About Kill Bill</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/demo.html">Demo</a></li><li><a class="nav-link" href="/latest/features.html">Features List</a></li><li><a class="nav-link" href="/latest/faq.html">Technical FAQs</a></li><li><a class="nav-link" href="/latest/Kill-Bill-Glossary.html">Glossary</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.3021 4.08526L9.66105 6.72632C10.0032 7.09579 10.2221 7.58842 10.2221 8.12211C10.2221 9.24421 9.30526 10.1611 8.18316 10.1611H5.37789C4.25579 10.1611 3.33895 9.24421 3.33895 8.12211V5.33053C3.33895 4.20842 4.25579 3.29158 5.37789 3.29158C5.92526 3.29158 6.40421 3.51053 6.77368 3.85263L9.42842 1.19789C8.53895 0.746316 7.55368 0.5 6.5 0.5C2.91474 0.5 0 3.41474 0 7C0 10.5853 2.91474 13.5 6.5 13.5C8.29263 13.5 9.92105 12.7747 11.0979 11.5979C12.2747 10.4211 13 8.79263 13 7C13 5.94632 12.7537 4.96105 12.3021 4.08526Z" fill="#D1D5DB"/><path d="M6.04841 5.33057C6.04841 4.96109 5.74736 4.64635 5.3642 4.64635C4.98105 4.64635 4.67999 4.94741 4.67999 5.33057V8.13583C4.67999 8.5053 4.98105 8.82004 5.3642 8.82004H8.16947C8.53894 8.82004 8.85368 8.51899 8.85368 8.13583C8.85368 7.75267 8.55262 7.45162 8.16947 7.45162H7.00631L12.1242 2.34741C12.3842 2.08741 12.3842 1.64951 12.1242 1.38951C11.8505 1.11583 11.4263 1.11583 11.1526 1.38951L6.04841 6.49372V5.33057Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">Internal</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg> </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="/latest/internal_design.html">Internal Design</a></li><li><a class="nav-link" href="/latest/entitlement_subsystem.html">Entitlement Subsystem</a></li><li><a class="nav-link" href="/latest/invoice_subsystem.html">Invoice Subsystem</a></li><li><a class="nav-link" href="/latest/development.html">Development Environment</a></li></ul></li><li><div class="icon-title"><div class="left-part"><svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.9462 5.38696C12.822 4.98052 12.5006 4.71215 12.0846 4.66832L9.06857 4.3811C8.86395 4.36202 8.69953 4.23643 8.6171 4.03592L7.41897 1.12839C7.2541 0.740566 6.902 0.5 6.50067 0.5C6.09098 0.5 5.73843 0.742216 5.58124 1.13099L4.38401 4.03639C4.3018 4.23667 4.13716 4.36225 3.93209 4.38134L0.907742 4.66879C0.502118 4.71238 0.181638 4.9791 0.0486129 5.38719C-0.0740231 5.78822 0.0391272 6.21374 0.345604 6.49908L2.62419 8.58218C2.7789 8.72449 2.84146 8.92571 2.79629 9.13376L2.12417 12.2189C2.03292 12.6346 2.18176 13.0483 2.51308 13.2985C2.83559 13.5424 3.27283 13.5624 3.61409 13.3506L6.22265 11.7324C6.39836 11.6195 6.59914 11.6176 6.78117 11.7345L9.38657 13.3504C9.54398 13.4482 9.7215 13.5 9.90015 13.5C10.1109 13.5 10.3125 13.4298 10.4813 13.2988C10.8126 13.0483 10.9616 12.6346 10.8706 12.2199L10.2048 9.13376C10.1594 8.92571 10.2222 8.72473 10.3765 8.58265L12.6541 6.49342C12.9656 6.21233 13.0769 5.78704 12.9462 5.38696Z" fill="#D1D5DB"/></svg><a class="bd-toc-link main-link">References</a></div><svg class="chevron" width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5024 5.70711C10.1119 6.09763 9.47871 6.09763 9.08818 5.70711L5.7953 2.41421L2.50241 5.70711C2.11188 6.09763 1.47872 6.09763 1.0882 5.70711C0.697672 5.31658 0.697672 4.68342 1.0882 4.29289L5.08819 0.292893C5.47871 -0.0976311 6.11188 -0.0976311 6.5024 0.292893L10.5024 4.29289C10.8929 4.68342 10.8929 5.31658 10.5024 5.70711Z" fill="#D1D5DB"/></svg>  </div><ul class="nav navbar-nav"><li class="bd-sidenav-active"><a class="nav-link" href="https://github.com/killbill/killbill-docs/tree/v3/swagger" onclick="getOutboundLink('https://github.com/killbill/killbill-docs/tree/v3/swagger'); return false;">Swagger&nbsp;API Schema</a></li><li><a class="nav-link" href="/latest/catalog.xsd">Catalog XSD Reference</a></li><li><a class="nav-link" href="/latest/overdue.xsd">Overdue XSD Reference</a></li></ul></li></ul></nav><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script><script>
  let $ = jQuery;
  $('.icon-title').on('click', function() {
    $(this).next().toggle();
    $(this).find('.chevron').toggleClass('rotated');
  })

  let pageURL = $(location).attr("href");
  $('.nav-link').each(function() {
    if (pageURL.includes($(this).attr('href'))) {
      $(this).parent().addClass('list-item-active');
      $(this).parent().parent().addClass('active-list');
      $(this).parent().parent().prev().addClass('bd-link-active-wrap');
    }
  });
</script><a class="doclink" href="mailto:support@killbill.io">Report a doc problem</a></aside></div><div class="col-12 col-md-9 col-xl-8"><article class="content-wrapper"><div class="banner"><div class="bg-image"><svg class="absolute-figure circle1" width="41" height="38" viewBox="0 0 41 38" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="12.5" cy="10.5" rx="28.5" ry="27.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle2" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle3" width="97" height="97" viewBox="0 0 97 97" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="48.5" cy="48.5" r="48.5" fill="white" fill-opacity="0.4"/>
</svg>
<svg class="absolute-figure circle4" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="7" cy="7" r="7" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle5" width="65" height="23" viewBox="0 0 65 23" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="32.5" cy="-9.5" r="32.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle6" width="48" height="31" viewBox="0 0 48 31" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="24" cy="24" r="24" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle7" width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle8" width="20" height="10" viewBox="0 0 20 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <ellipse cx="10" cy="9.5" rx="10" ry="9.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure circle9" width="49" height="48" viewBox="0 0 49 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="48.5" cy="48.5" r="48.5" fill="white" fill-opacity="0.2"/>
</svg>
<svg class="absolute-figure abstract-figure" width="703" height="174" viewBox="0 0 703 174" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M25.5 246C-96 87.7673 245.949 67.3215 475.548 64.1799C705.146 61.0384 565.01 -188.501 629.653 -188.741C694.297 -188.982 766.062 221.014 766.062 221.014L297.072 460.733C297.072 460.733 147 404.233 25.5 246Z" fill="white" fill-opacity="0.2"/>
</svg></div><h1>Catalog Examples</h1></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>This document provides examples of catalogs and how they affect invoices/subscriptions.</p></div></div></div>
<div class="sect1"><h2 id="_how_to_use_this_document">How to Use This Document</h2><div class="sectionbody"><div class="paragraph"><p>Each section in this document corresponds to a particular catalog component and provides examples of catalogs that demonstrate that catalog component.</p></div>
<div class="paragraph"><p>You can try out the various examples in each section by:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Uploading the corresponding catalog (via Kaui or <a href="https://killbill.github.io/slate/#catalog-upload-a-catalog-as-xml">Upload Catalog</a> API call)</p></li><li><p>Creating an account (via Kaui or <a href="https://killbill.github.io/slate/#account-create-an-account">Create Account</a> API call)</p></li><li><p>Creating a subscription as required (via Kaui or <a href="https://killbill.github.io/slate/#subscription-create-a-subscription">Create Subscription</a> API call)</p></li><li><p>Triggering an invoice dry-run (via Kaui or <a href="https://killbill.github.io/slate/#invoice-generate-a-dry-run-invoice">Generate Dry Run</a> API call)</p></li></ol></div></div></div>
<div class="sect1"><h2 id="_prerequisites">Prerequisites</h2><div class="sectionbody"><div class="paragraph"><p>Ensure that you have gone through the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog"><em>Subscription User Guide</em></a> and are familiar with the various catalog components like products, plans, phases, and so forth.</p></div></div></div>
<div class="sect1"><h2 id="_billing_modes">Billing Modes</h2><div class="sectionbody"><div class="paragraph"><p>A catalog needs to include a <strong>Billing Mode</strong> as explained in the <a href="https://docs.killbill.io/latest/invoice_subsystem.html#_overview"><em>Invoice Subsystem</em></a> document.</p></div>
<div class="paragraph"><p>A quick summary of billing modes:</p></div>
<div class="ulist"><ul><li><p>Can be specified at the <strong>catalog</strong> level or on a <strong>per-plan</strong> basis.</p></li><li><p><strong>IN_ADVANCE</strong> indicates that each recurring subscription is charged at the <em>beginning</em> of the billing period.</p></li><li><p><strong>IN_ARREAR</strong> indicates that each recurring subscription is charged at the <em>end</em> of the billing period.</p></li></ul></div>
<div class="paragraph"><p>This section provides examples of catalogs with different billing modes. For simplicity&#8217;s sake, only catalogs with catalog-level billing modes are demonstrated below. However, the behavior is the same even when a per-plan billing mode is used.</p></div>
<div class="paragraph"><p>Also for the sake of simplicity, all the catalogs demonstrated in this section include a single product (<code>STANDARD</code>) and a single plan (<code>standard-monthly</code>) corresponding to it.</p></div>
<div class="sect2"><h3 id="_in_advance_billing_mode">IN_ADVANCE Billing Mode</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/in-advance-billing.xml">In Advance Billing</a> catalog. It specifies an <strong>IN_ADVANCE</strong> billing mode. In this case, the <code>standard-monthly</code> plan has a single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code> (plan phases are explained in the next section).</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for  <code>2021-09-17</code> to <code>2021-10-17</code> since <strong>IN_ADVANCE</strong> billing is used.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2021-10-17</code> to <code>2021-11-17</code></p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_in_arrear_billing_mode">IN_ARREAR Billing Mode</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/in-arrear-billing.xml">In Arrear Billing</a> catalog. It specifies an <strong>IN_ARREAR</strong> billing mode. Just like the earlier catalog, the <code>standard-monthly</code> plan has a single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code>.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Because <strong>IN_ARREAR</strong> billing mode is specified, the system does not generate an invoice (yet).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2021-09-17</code> to <code>2021-10-17</code></p></td></tr></tbody></table></div></div></div>
<div class="sect1"><h2 id="_plan_phases">Plan Phases</h2><div class="sectionbody"><div class="paragraph"><p>Each plan can consist of multiple phases as explained in the <a href="https://docs.killbill.io/latest/userguide_subscription.html#_plans"><em>Subscription Billing</em></a> document.</p></div>
<div class="paragraph"><p>A quick summary of plan phases:</p></div>
<div class="ulist"><ul><li><p>Can be one of the type <code>TRIAL</code>, <code>DISCOUNT</code>, <code>FIXEDTERM</code>, <code>EVERGREEN</code>.</p></li><li><p>Each phase has a <code>Duration</code>, <code>Billing Period</code>, <code>Recurring Price</code>, <code>Fixed Price</code>, and <code>Usage Sections</code>.</p></li></ul></div>
<div class="paragraph"><p>This section provides examples of catalogs that demonstrate the various plan phases.</p></div>
<div class="paragraph"><p>All the catalogs demonstrated in this section use <strong>IN_ADVANCE</strong> billing mode. Also, as before, all the catalogs include a single product (<code>STANDARD</code>) and a single plan (<code>standard-monthly</code>) corresponding to it.</p></div>
<div class="sect2"><h3 id="_no_trial_phase_and_fixed_term_phase">No Trial Phase and Fixed Term Phase</h3><div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/fixedterm-no-trial.xml">Fixed Term No Trial</a> catalog. In this case, the <code>standard-weekly</code> plan has a single <code>FIXEDTERM</code> phase for a period of <code>6</code> weeks with a weekly recurring charge of <code>$24.95</code>. So, users will be charged <code>$24.95</code> weekly for <code>6</code> weeks, after which the fixed term ends.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-10</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-10</code> to <code>2021-09-17</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-18</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2021-09-17</code> to <code>2021-09-24</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-15</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2021-10-15</code> to <code>2021-10-22</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice generated as the fixed term is over.</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_no_trial_phase_and_monthly_evergreen_phase">No Trial Phase and Monthly Evergreen Phase</h3><div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/monthly-no-trial.xml">Monthly No Trial</a> catalog. In this case, the <code>standard-monthly</code> plan has a single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code>. So, users will be charged <code>$24.95</code> monthly in perpetuity.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-10</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-10</code> to <code>2021-10-10</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-10</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2021-10-10</code> to <code>2021-11-10</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2022-05-10</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2022-05-10</code> to <code>2022-06-10</code></p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_trial_phase_and_monthly_evergreen_phase">Trial Phase and Monthly Evergreen Phase</h3><div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/monthly-with-trial.xml">Monthly With Trial</a> catalog. In this case, the <code>standard-monthly</code> plan has a <code>TRIAL</code> phase of <code>10</code> days followed by an <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code>. So, users will not be charged for the first <code>10</code> days, after which they will be charged <code>$24.95</code> monthly in perpetuity.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-10</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$0</code> due to trial phase</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-20</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Trial phase ends so Invoice generated for <code>$24.95</code> for <code>2021-09-20</code> to <code>2021-10-20</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-20</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2021-10-20</code> to <code>2022-11-20</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2022-01-20</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$24.95</code> for <code>2022-01-20</code> to <code>2022-02-20</code></p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_fixed_and_recurring_price_evergreen_phase">Fixed and Recurring Price Evergreen Phase</h3><div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/blob/d7f8891546850dcb8767041c556ef04f589746ca/catalogs/fixed-and-recurring-price-evergreen-phase.xml">Fixed and Recurring Price Evergreen Phase</a> catalog. In this case, the <code>standard-monthly</code> plan has a single <code>EVERGREEN</code> phase. It has a <em>fixed price</em> of <code>$50</code> and a <em>recurring charge</em> of <code>$24.95</code>. So, users will be charged <code>$74.95</code> (fixed and recurring price) for the first month. After that, they will be charged a recurring price of <code>$24.95</code> monthly in perpetuity.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-13</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$74.95</code> for <code>2021-09-13</code> to <code>2021-10-13</code> (Fixed price as well as recurring price)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-13</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-13</code> to <code>2021-11-13</code> (only recurring price)</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_discount_phase_and_evergreen_phase">Discount Phase and Evergreen Phase</h3><div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/discount-and-evergreen.xml">Discount and Evergreen</a> catalog. In this case, the <code>standard-monthly</code> plan has a <code>DISCOUNT</code> phase of <code>3</code> months (with a monthly charge of <code>$4.95</code>) followed by an <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code>. So, users will be charged <code>$4.95</code> (discounted price) for the first <code>3</code> months. After that, they will be charged a recurring price of <code>$24.95</code> monthly in perpetuity.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-15</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$4.95</code> due to <code>DISCOUNT</code> phase</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-15</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$4.95</code> for <code>2021-10-15</code> to <code>2021-11-15</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-12-15</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Discount phase ends, invoice generated for  <code>$24.95</code> for <code>2021-12-15</code> to <code>2022-01-15</code></p></td></tr></tbody></table></div></div></div>
<div class="sect1"><h2 id="_catalog_with_multiple_plans">Catalog with Multiple Plans</h2><div class="sectionbody"><div class="paragraph"><p>A catalog can contain multiple products.  Each product can be associated with multiple plans. Each plan can, in turn, have multiple phases (trial, discount, etc.).</p></div>
<div class="paragraph"><p>This section provides examples of catalogs that include multiple products and plans.</p></div>
<div class="sect2"><h3 id="_catalog_with_monthly_plan_and_annual_plan">Catalog with Monthly Plan and Annual Plan</h3><div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/monthly-and-annual-plan.xml">Monthly and Annual Plan</a> catalog.</p></div>
<div class="paragraph"><p>Just like the catalogs explained above, this catalog has only one product (<code>Standard</code>). However, it has multiple plans that correspond to the <code>Standard</code> product as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard_monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard_annual</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with an annual recurring charge of <code>$275</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-monthly</code> plan on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-17</code> to <code>2021-11-17</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-annual</code> plan on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$275</code> corresponding to the <code>standard-annual</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-17</code> to <code>2021-11-17</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2022-09-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated with two invoice items corresponding to both plans for <code>$299.95</code>.</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_catalog_with_add_on_plan">Catalog with Add-on plan</h3><div class="paragraph"><p>This section uses the <a href="https://github.com/killbill/killbill-docs/blob/d7f8891546850dcb8767041c556ef04f589746ca/catalogs/monthly-no-trial-with-addon.xml">Monthly No Trial With Add-on</a> catalog.</p></div>
<div class="paragraph"><p>It has a <code>BASE</code> product and <code>ADD_ON</code> product as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Category</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Add_on</p></td></tr></tbody></table>
<div class="paragraph"><p>It has two plans corresponding to both products as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">remotecontrol-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$17.95</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription corresponding to the <code>standard_monthly</code> plan on <code>2021-09-15</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-15</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-15</code> to <code>2021-11-15</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Add the <code>remotecontrol-monthly</code> add-on to the existing subscription  on <code>2021-09-15</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$17.95</code> corresponding to the <code>remotecontrol-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-15</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$42.90</code> for <code>2021-10-15</code> to <code>2021-11-15</code> corresponding to both plans.</p></td></tr></tbody></table></div></div></div>
<div class="sect1"><h2 id="_billing_alignment_rules">Billing Alignment Rules</h2><div class="sectionbody"><div class="paragraph"><p>Another important section in the catalog is the <a href="https://docs.killbill.io/latest/userguide_subscription.html#_billing_alignment_rules">Billing Alignment Rules</a> section.</p></div>
<div class="paragraph"><p>A brief summary of billing alignment rules:</p></div>
<div class="ulist"><ul><li><p>The "Billing Alignment Rules" section specifies whether customers are billed at the account level, subscription level, or subscription bundle level.</p></li><li><p>If the catalog specifies <code>ACCOUNT</code> billing alignment, all the subscriptions belonging to the account are aligned and invoiced with the <em>Bill Cycle Day (BCD)</em> that was specified when the account was created.</p></li><li><p>If the catalog specifies <code>SUBSCRIPTION</code> billing alignment, each subscription is invoiced as per its bill date.</p></li><li><p>If the catalog specifies <code>BUNDLE</code> billing alignment, all the subscriptions within a bundle are aligned and invoiced on the same day.</p></li></ul></div>
<div class="paragraph"><p>This section provides examples of catalogs with different billing alignment rules.</p></div>
<div class="sect2"><h3 id="_account_billing_alignment">Account Billing Alignment</h3><div class="paragraph"><p>When <code>ACCOUNT</code> billing alignment is specified in the catalog, the billing cycle of all the subscriptions are aligned with the <code>BCD</code> of the account. Note that this is the default billing alignment, so even when billing alignment rules are not explicitly specified in a catalog, it defaults to <code>ACCOUNT</code>.</p></div>
<div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/account-billing-alignment.xml">Account Billing Alignment</a> catalog. It specifies <code>ACCOUNT</code> billing alignment.</p></div>
<div class="paragraph"><p>For simplicity&#8217;s sake, this catalog includes a single product (<code>STANDARD</code>) and a single plan (<code>standard-monthly</code>) corresponding to it.</p></div>
<div class="sect3"><h4 id="_case_1_account_with_no_bcd">Case 1: Account with No BCD</h4><div class="paragraph"><p>If no BCD is specified with the account, it defaults to the first bill date of the first subscription.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a new account. Leave BCD field empty</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Account created, BCD is blank.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-16</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-16</code> to <code>2021-10-16</code>. BCD set to <code>16</code> (Since subscription is created on 16th)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-16</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-16</code> to <code>2021-11-16</code></p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_case_2_account_with_bcd">Case 2: Account with BCD</h4><div class="paragraph"><p>If a BCD is specified with the account, the subscriptions are invoiced on the specified day. If the start date of a subscription is different from the BCD, the first invoice is prorated. All subsequent invoices are aligned with the BCD.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a new account. Specify BCD as <code>25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Account created with BCD set to <code>25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-16</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$7.24</code> for <code>2021-09-16</code> to <code>2021-09-25</code> (prorated)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-25</code> to <code>2021-10-25</code></p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_case_3_account_with_no_bcd_and_multiple_subscriptions_on_different_days">Case 3: Account with No BCD and Multiple Subscriptions on Different Days</h4><div class="paragraph"><p>Even if there are multiple subscriptions associated with an account, all the subscriptions are aligned with the BCD. If the BCD is not explicitly set, it
defaults to the first bill date of the first subscription. All subsequent subscriptions use this BCD.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a new account. Leave BCD field empty</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Account created, BCD is blank.</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-17</code> to <code>2021-10-17</code>. BCD set to <code>17</code> (Since subscription is created on 17th)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription, with date of <code>2021-09-25</code> (future date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice is generated as a future date is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$18.30</code> for <code>2021-09-25</code> to <code>2021-10-17</code> (Prorated since BCD is 17)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated with two invoice items corresponding to both subscriptions for <code>$49.90</code>.</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_case_4_account_with_bcd_multiple_subscriptions_on_different_days">Case 4: Account with BCD, Multiple Subscriptions on Different Days</h4><div class="paragraph"><p>If there is a BCD specified with the account, all subscriptions use this BCD irrespective of the subscription creation day.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a new account. Specify BCD as <code>25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Account created with BCD set to <code>25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$6.44</code> for <code>2021-09-17</code> to <code>2021-09-25</code> (Prorated since BCD is 25)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-25</code> to <code>2021-10-25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription on <code>2021-09-30</code> (future date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice is generated as a future date is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-25</code> to <code>2021-10-25</code>  (Second subscription not yet active)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-30</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$20.79</code> for <code>2021-09-30</code> to <code>2021-10-25</code> (Prorated since BCD is 25)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated with two invoice items corresponding to both subscriptions for <code>$49.90</code>.</p></td></tr></tbody></table></div></div>
<div class="sect2"><h3 id="_subscription_billing_alignment">Subscription Billing Alignment</h3><div class="paragraph"><p>When <code>SUBSCRIPTION</code> billing alignment is specified in the catalog, each subscription is invoiced separately as per its bill date.</p></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><strong>Note:</strong> <code>SUBSCRIPTION</code> billing alignment applies even for subscriptions that are part of the same subscription bundle. So, if a subscription bundle consists of a base plan and an add-on plan, the add-on plan is invoiced as per its own date and is NOT aligned with the base subscription billing date.</td></tr></table></div>
<div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/subscription-billing-alignment.xml">Subscription Billing Alignment</a> catalog. It specifies <code>SUBSCRIPTION</code> billing alignment.</p></div>
<div class="paragraph"><p>It has only one product (<code>Standard</code>). However, it has multiple plans corresponding to the <code>Standard</code> product as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-annual</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with an annual recurring charge of <code>$275</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a new account. Specify BCD as <code>25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Account created with BCD set to <code>25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-monthly</code> plan on <code>2021-09-17</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-17</code> to <code>2021-10-17</code> (BCD is ignored, subscription is billed as per its creation date)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-17</code> to <code>2021-11-17</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-annual</code> plan with date of <code>2021-09-30</code> (future date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice is generated as a future date is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-30</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$275</code> for <code>2021-09-30</code> to <code>2022-09-30</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-17</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-17</code> to <code>2021-11-17</code> corresponding to <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2022-09-30</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$275</code> for <code>2022-09-30</code> to <code>2023-09-30</code> corresponding to <code>standard-annual</code> plan</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_bundle_billing_alignment">Bundle Billing Alignment</h3><div class="paragraph"><p>When <code>BUNDLE</code> billing alignment is specified in the catalog, all subscriptions in a bundle are invoiced together. The bill day is derived from the first bill date of the first subscription.</p></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><strong>Note:</strong> <code>BUNDLE</code> billing alignment applies only to subscriptions within a single bundle. This type of billing alignment does not affect subscriptions across different bundles. So, when multiple subscriptions are created in different bundles, each subscription is still billed as per its creation date.</td></tr></table></div>
<div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/tree/4671dcd9da1cf021e85629ab67e3ffb6fb553bb1/catalogs/bundle-billing-alignment.xml">Bundle Billing Alignment</a> catalog. It specifies <code>BUNDLE</code> billing alignment.</p></div>
<div class="paragraph"><p>It has a <code>BASE</code> and an <code>ADD_ON</code> product as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Category</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Add_on</p></td></tr></tbody></table>
<div class="paragraph"><p>It has two plans corresponding to both products as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$24.95</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">remotecontrol-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$17.95</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a new account. Specify BCD as <code>25</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Account created with BCD set to <code>25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-monthly</code> plan on <code>2021-09-20</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-09-20</code> to <code>2021-10-20</code> (BCD is ignored, subscription is billed as per its creation date)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-20</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$24.95</code> for <code>2021-10-20</code> to <code>2021-11-20</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Add the <code>remotecontrol-monthly</code> add-on to the existing subscription with date of <code>2021-09-30</code> (future date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice is generated as a future date is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-30</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$11.97</code> for <code>2021-09-30</code> to <code>2021-10-20</code> corresponding to the <code>remotecontrol-monthly</code> plan (Prorated since <code>BUNDLE</code> billing alignment is used)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-20</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$42.90</code> for <code>2021-10-20</code> to <code>2021-11-20</code> corresponding to both plans</p></td></tr></tbody></table></div></div></div>
<div class="sect1"><h2 id="_subscription_alignment_rules">Subscription Alignment Rules</h2><div class="sectionbody"><div class="paragraph"><p>The <a href="https://docs.killbill.io/latest/userguide_subscription.html#_subscription_alignment_rules"><em>Subscription Alignment Rules</em></a> section in the catalog can be used to specify rules that are useful for advanced use cases. This section explains some of these rules.</p></div>
<div class="sect2"><h3 id="_plan_creation_addon_phase_alignment">Plan Creation Addon Phase Alignment</h3><div class="paragraph"><p>The <a href="https://docs.killbill.io/latest/userguide_subscription.html#_subscription_alignment_rules">plan creation addon phase alignment</a> rules specify how the phases of an addon subscription <em>align</em> with the phases of the base subscription.</p></div>
<div class="paragraph"><p>A quick summary of plan creation phase alignment rules:</p></div>
<div class="ulist"><ul><li><p>A rule specifies the name of an addon product and how its phases should align with the phases of the base product.</p></li><li><p>There are two possible values for phase alignment, <code>START_OF_BUNDLE</code> and <code>START_OF_SUBSCRIPTION</code>.</p></li><li><p><code>START_OF_BUNDLE</code> causes the phases of the add-on to start on the date when the base plan was first created. This causes the phases of add-on subscription to align with the phases of the base subscription (provided the phases are of the same length)</p></li><li><p><code>START_OF_SUBSCRIPTION</code> causes the phases of the add-on subscription to start with the add-on subscription irrespective of the base subscription.</p></li></ul></div>
<div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/blob/d7f8891546850dcb8767041c556ef04f589746ca/catalogs/plan-creation-addon-phase-alignment.xml">Plan Creation Addon Phase Alignment</a> catalog.</p></div>
<div class="paragraph"><p>It has a <code>BASE</code> product and two <code>ADD_ON</code> products as follows:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Category</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Add_on</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">OilSlick</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Add_on</p></td></tr></tbody></table>
<div class="paragraph"><p>It has the following plans corresponding to the products:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRIAL</code> phase of <code>10</code> days followed by an <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">remotecontrol-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRIAL</code> phase of <code>10</code> days followed by an <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$15</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">oilslick-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">OilSlick</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRIAL</code> phase of <code>10</code> days followed by an <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$10</code></p></td></tr></tbody></table>
<div class="paragraph"><p>It specifies the following add-on phase alignment rules:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Predicate</th><th class="tableblock halign-left valign-top">Alignment</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">product=RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">START_OF_SUBSCRIPTION</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">product=OilSlick</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">START_OF_BUNDLE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">; (Anything else)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">START_OF_BUNDLE</p></td></tr></tbody></table>
<div class="sect3"><h4 id="_rule_1_if_productremotecontrol_alignmentstart_of_subscription">Rule 1: If product=RemoteControl, alignment=START_OF_SUBSCRIPTION</h4><div class="paragraph"><p>This rule specifies that if the <code>RemoteControl</code> add-on is added to a base subscription, its phases should start on the date that the the add-on subscription is added irrespective of the base subscription.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription corresponding to the <code>standard-monthly</code> plan on <code>2021-09-23</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$0</code> (since subscription is in trial phase)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-03</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$25</code> for <code>2021-10-03</code> to <code>2021-11-03</code> (Trial phase ends)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Add the <code>remotecontrol-monthly</code> add-on to the existing subscription with date <code>2021-09-30</code> (future date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice is generated as a future date is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-30</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$0</code> corresponding to the <code>remotecontrol-monthly</code> plan (since the subscription is in trial phase)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-03</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated with only one invoice item corresponding to  <code>standard-monthly</code> plan. Since <code>RemoteControl</code> uses <code>START_OF_SUBSCRIPTION</code> alignment rule, its phases start on the day the subscription starts (<code>2021-09-30</code>). So, <code>remotecontrol-monthly</code> is still in <code>TRIAL</code> phase and does not have an invoice entry.</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_2_if_productoilslick_alignmentstart_of_bundle">Rule 2: If product=OilSlick, alignment=START_OF_BUNDLE</h4><div class="paragraph"><p>This rule specifies that if the <code>OilSlick</code> add-on is added to a base subscription, its phases should start on the date of the base subscription.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription corresponding to the <code>standard-monthly</code> plan on <code>2021-09-23</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$0</code> (since subscription is in trial phase)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-03</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$25</code> for <code>2021-10-03</code> to <code>2021-11-03</code> (Trial phase ends)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Add the <code>oilslick-monthly</code> add-on to the existing subscription with date <code>2021-09-30</code> (future date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">No invoice is generated as a future date is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-09-30</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$0</code> corresponding to the <code>oilslick-monthly</code> plan (since subscription is in trial phase)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-03</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated with two invoice items corresponding to <code>standard-monthly</code> and <code>oilslick-monthly</code> plans. Since
 <code>OilSlick</code> uses <code>START_OF_BUNDLE</code> alignment rule, its phases start on the day the base subscription starts (<code>2021-09-23</code>). So, <code>TRIAL</code> phase ends on <code>2021-10-03</code> and an invoice item is created.</p></td></tr></tbody></table></div></div>
<div class="sect2"><h3 id="_plan_cancellation_timing">Plan Cancellation Timing</h3><div class="paragraph"><p>The <a href="https://docs.killbill.io/latest/userguide_subscription.html#_plan_cancellation_timing">plan cancellation timing</a> rules specify how the billing policy is affected when a plan is canceled.</p></div>
<div class="paragraph"><p>A quick summary of plan cancellation rules:</p></div>
<div class="ulist"><ul><li><p>A rule specifies one of <code>productCategory</code>, <code>billingPeriod</code>,<code>priceList</code>, <code>phaseType</code> and its cancellation <code>policy</code>.</p></li><li><p>There are two possible values for cancellation policy, <code>END_OF_TERM</code> and <code>IMMEDIATE</code>.</p></li><li><p><code>END_OF_TERM</code> causes the cancellation to be applied at the end of the billing period. This type of cancellation rule avoids generating credits.</p></li><li><p><code>IMMEDIATE</code> causess the cancellation to be applied immediately. This type of cancellation rule results in a credit being generated corresponding to the balance of the subscription that has been paid for but not used.</p></li><li><p>The cancellation policy specified here is the <strong>default</strong> cancellation policy. This is applicable only in the case when an explicit cancellation policy is not specified (via Kaui or API call).</p></li></ul></div>
<div class="admonitionblock note"><table><tr><td class="icon"><div class="title">Note</div></td><td class="content"><strong>Note:</strong>
The cancellation policy specified in this section applies only to <em>billing</em>. The cancellation policy for entitlements can be specified explicitly via Kaui or an API call. It defaults to <em>immediate</em> as explained in the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-entitlement"><em>Subscription Billing</em></a> document.</td></tr></table></div>
<div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/blob/d7f8891546850dcb8767041c556ef04f589746ca/catalogs/plan-cancellation-timing.xml">Plan Cancellation Timing</a> catalog.</p></div>
<div class="paragraph"><p>It has the following products/plans:</p></div>
<div class="sect3"><h4 id="_products">Products</h4><table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Category</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Add_on</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_plans">Plans</h4><table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$25</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">remotecontrol-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">RemoteControl</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$15</code></p></td></tr></tbody></table>
<div class="paragraph"><p>It specifies the following plan cancellation rules:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Predicate</th><th class="tableblock halign-left valign-top">Cancellation Policy</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">productCategory=BASE</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">END_OF_TERM</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">productCategory=ADD_ON</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">IMMEDIATE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">; (anything else)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">END_OF_TERM</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_1_if_productcategorybase_cancellation_policyend_of_term">Rule 1: If productCategory=BASE, cancellation policy=END_OF_TERM</h4><div class="paragraph"><p>This rule specifies that if the category of a product is <code>BASE</code>  product, cancellation should should occur at the end of the billing period.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$25</code> for <code>2021-09-29</code> to <code>2021-10-29</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Cancel subscription (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice with credit is NOT generated (Since <code>BASE</code> product category uses <code>END_OF_TERM</code> cancellation policy)</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_2_if_productcategoryadd_on_cancellation_policyimmediate">Rule 2: If productCategory=ADD_ON, cancellation policy=IMMEDIATE</h4><div class="paragraph"><p>This rule specifies that if the category of a product is <code>ADD_ON</code>  product, cancellation should should occur immediately.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$25</code> for <code>2021-09-29</code> to <code>2021-10-29</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Add the <code>remotecontrol-monthly</code> add-on to the existing subscription on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$15</code> for <code>2021-09-29</code> to <code>2021-10-29</code> corresponding to  <code>remotecontrol-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Cancel add-on subscription (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">An invoice is generated with a credit of <code>$15</code>(Since <code>ADDON</code> product uses <code>IMMEDIATE</code> cancellation policy)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Cancel base subscription (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice with credit is NOT generated  (Since <code>BASE</code> product  uses <code>END_OF_TERM</code> cancellation policy)</p></td></tr></tbody></table></div></div>
<div class="sect2"><h3 id="_plan_change_timing">Plan Change Timing</h3><div class="paragraph"><p>The <a href="https://docs.killbill.io/latest/userguide_subscription.html#_plan_change_timing">plan change timing</a> rules specify how the system should behave when a subscription plan is changed.</p></div>
<div class="paragraph"><p>A quick summary of plan change rules:</p></div>
<div class="ulist"><ul><li><p>A rule specifies one of <code>phaseType</code>,  <code>fromProduct</code>/<code>toProduct</code>, <code>fromProductCategory</code>/ <code>toProductCategory</code>, <code>fromBillingPeriod</code>/ <code>toBillingPeriod</code>, <code>fromPriceList</code>/<code>toPriceList</code> and its change <code>policy</code>.</p></li><li><p>There are three possible values for change policy, <code>END_OF_TERM</code>,  <code>IMMEDIATE</code> and <code>ILLEGAL</code>.</p></li><li><p><code>END_OF_TERM</code> specifies that the plan change should happen at the end of the current billing period.</p></li><li><p><code>IMMEDIATE</code> specifies that the plan change should happen immediately.</p></li><li><p><code>ILLEGAL</code> specifies that the plan change is not allowed.</p></li></ul></div>
<div class="paragraph"><p>This example uses the  <a href="https://github.com/killbill/killbill-docs/blob/d7f8891546850dcb8767041c556ef04f589746ca/catalogs/plan-change-timing.xml">Plan Change Timing</a> catalog.</p></div>
<div class="paragraph"><p>It has the following products/plans:</p></div>
<div class="sect3"><h4 id="_products_2">Products</h4><table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Category</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Sports</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Super</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Premium</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Base</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_plans_2">Plans</h4><table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Plan Name</th><th class="tableblock halign-left valign-top">Product</th><th class="tableblock halign-left valign-top">Plan Description</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">standard-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRIAL</code> phase of <code>30</code> days followed by an <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$100</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">sports-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Sports</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$500</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">super-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Super</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$1000</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">premium-monthly</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Premium</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Single <code>EVERGREEN</code> phase with a monthly recurring charge of <code>$2000</code></p></td></tr></tbody></table>
<div class="paragraph"><p>It specifies the following plan cancellation rules:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Predicate</th><th class="tableblock halign-left valign-top">Change Policy</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">phaseType=TRIAL</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">IMMEDIATE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">fromProduct=Sports and toProduct=Super</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">IMMEDIATE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">fromProduct=; and toProduct=Super (any fromProduct)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">IMMEDIATE</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">fromProduct=Premium and toProduct=Standard</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ILLEGAL</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">; (anything else)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">END_OF_TERM</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_1_if_phasetypetrial_change_policyimmediate">Rule 1: If phaseType=TRIAL, change policy=IMMEDIATE</h4><div class="paragraph"><p>This rule specifies that if a product is in <code>TRIAL</code> phase, plan change should take effect immediately.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>standard-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$0</code> (since subscription is in trial phase)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Change subscription to use the <code>sports-monthly</code> plan (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Plan change takes effect immediately (Invoice generated for <code>$500</code> for <code>2021-09-29</code> to <code>2021-10-29</code> corresponding to the <code>sports-monthly</code> plan)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$500</code> for <code>2021-10-29</code> to <code>2021-11-29</code> corresponding to the <code>sports-monthly</code> plan</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_2_if_fromproductsports_and_toproductsuper_change_policyimmediate">Rule 2: If fromProduct=Sports and toProduct=Super, change policy=IMMEDIATE</h4><div class="paragraph"><p>This rule specifies that if the plan change involves upgrading a product from <code>Sports</code> to <code>Super</code>, it should take effect immediately.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>sports-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$500</code> for <code>2021-09-29</code> to <code>2021-10-29</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Change subscription to use the <code>super-monthly</code> plan (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Plan change takes effect immediately (Since the monthly price for <code>super-monthly</code> is <code>$1000</code>, an invoice is generated for <code>$500</code> for <code>2021-09-29</code> to <code>2021-10-29</code> corresponding to the balance amount)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$1000</code> for <code>2021-10-29</code> to <code>2021-11-29</code> corresponding to the <code>super-monthly</code> plan</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_3_if_toproductpremium_change_policyimmediate_any_fromproduct_value">Rule 3: If toProduct=Premium, change policy=IMMEDIATE (any fromProduct value)</h4><div class="paragraph"><p>This rule specifies that if the plan change involves upgrading to <code>Premium</code>, it should take effect immediately.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>sports-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$500</code> for <code>2021-09-29</code> to <code>2021-10-29</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Change subscription to use the <code>premium-monthly</code> plan (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Plan change takes effect immediately (Since the monthly price for <code>premium-monthly</code> is <code>$2000</code>, an invoice is generated for <code>$1500</code> for <code>2021-09-29</code> to <code>2021-10-29</code> corresponding to the balance amount)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$2000</code> for <code>2021-10-29</code> to <code>2021-11-29</code> corresponding to the <code>premium-monthly</code> plan</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_4_if_fromproductpremium_and_toproductstandard_change_policyillegal">Rule 4: If fromProduct=Premium and toProduct=Standard, change policy=ILLEGAL</h4><div class="paragraph"><p>This rule specifies that if the plan change involves upgrading from <code>Standard</code> to <code>Premium</code>, it should not be allowed.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>premium-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$2000</code> for <code>2021-09-29</code> to <code>2021-10-29</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Change subscription to use the <code>standard-monthly</code> plan (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Plan change not allowed</p></td></tr></tbody></table></div>
<div class="sect3"><h4 id="_rule_5_for_anything_else_change_policyend_of_term">Rule 5: For anything else, change policy=END_OF_TERM</h4><div class="paragraph"><p>This is the default rule. It specifies that any other plan changes should occur at the end of the billing period.</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>sports-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$500</code> for <code>2021-09-29</code> to <code>2021-10-29</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Change subscription to use the <code>standard-monthly</code> plan (specify default policy)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Plan change takes effect end of term ( Invoice item corresponding to a credit is not generated)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$100</code> for <code>2021-10-29</code> to <code>2021-11-29</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr></tbody></table></div></div></div></div>
<div class="sect1"><h2 id="_usage_billing">Usage Billing</h2><div class="sectionbody"><div class="paragraph"><p>Kill Bill supports usage based billing as explained in the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog-usage"><em>Subscription Billing</em></a> document. A quick summary about usage billing:</p></div>
<div class="ulist"><ul><li><p>Users are billed based on their usage data as defined in the catalog. The <code>Plan</code> section in the catalog can contain one or more usage section(s) in addition to other non usage based sections.</p></li><li><p>Kill Bill supports two types of usage billing: <code>CONSUMABLE</code> and <code>CAPACITY</code></p></li><li><p>In <code>CONSUMABLE</code> billing, users are billed based on the number of units consumed. Two <code>TierBlockPolicy</code> policies are supported: <code>ALL_TIER</code> and <code>TOP_TIER</code>. The <code>ALL_TIER</code> policy charges users across each tier while the <code>TOP_TIER</code> policy charges users at the top tier.</p></li><li><p>In <code>CAPACITY</code> billing users are charged a flat rate based on the units consumed.</p></li></ul></div>
<div class="paragraph"><p>Let us take a look at a few catalog examples.</p></div>
<div class="sect2"><h3 id="_consumable_billing_with_all_tiers_policy">Consumable Billing with ALL_TIERS policy</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/blob/5d5d7a2219752da8a0d9456cc5a975161388088c/catalogs/consumable-billing-all-tiers.xml">Consumable Billing All Tiers</a> catalog. It has a <code>water-monthly</code> plan with a <code>MONTHLY</code> recurring charge of <code>$30</code>. In addition, it also has a usage section with <code>usageType=CONSUMABLE</code>, <code>tierBlockPolicy=ALL_TIERS</code> and the following <code>tieredBlock</code> sections:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 20%;"><col style="width: 20%;"><col style="width: 20%;"><col style="width: 20%;"><col style="width: 20%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Unit</th><th class="tableblock halign-left valign-top">Size</th><th class="tableblock halign-left valign-top">Price</th><th class="tableblock halign-left valign-top">Max</th><th class="tableblock halign-left valign-top">Explanation</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">liter</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">$1.50</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Users will be charged at $1.50 per liter for the first 1000 liters</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">liter</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">$2.0</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Users will be charged at $2.0 per liter for any units consumed above <code>1000</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>water-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Because <strong>IN_ARREAR</strong> billing mode is specified, the system does not generate an invoice (yet).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>400</code> with date <code>2021-10-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Again, invoice not generated since <strong>IN_ARREAR</strong> billing mode is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$630</code> for <code>2021-09-29</code> to <code>2021-10-29</code>. This is calculated as: <code>30 + (400 x 1.5) = 630</code> (Since <code>400</code> units are consumed, user is charged <code>$1.5</code> per liter as per the first tier)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>1200</code> with date <code>2021-11-01</code>. Trigger invoice dry run with target date <code>2021-11-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$1930</code> for <code>2021-10-29</code> to <code>2021-11-29</code>. This is calculated as: <code>30 + (1000 x 1.5) + (200 X 2.0) = 1930</code> (Since <code>1200</code> units are consumed, the first <code>1000</code> units are charged at <code>$1.5</code> per liter as per the first tier and the next <code>200</code> units are charged at at <code>$2.0</code> per liter as per the second tier)</p></td></tr></tbody></table>
<div class="paragraph"><p>See <a href="https://docs.killbill.io/latest/consumable_in_arrear.html"><em>Consumable In Arrear Tutorial</em></a> for additional information.</p></div></div>
<div class="sect2"><h3 id="_consumable_billing_with_top_tier_policy">Consumable Billing with TOP_TIER policy</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/blob/5d5d7a2219752da8a0d9456cc5a975161388088c/catalogs/consumable-billing-top-tier.xml">Consumable Billing Top Tier</a> catalog. This catalog is exactly the same as the <a href="https://github.com/killbill/killbill-docs/blob/5d5d7a2219752da8a0d9456cc5a975161388088c/catalogs/consumable-billing-all-tiers.xml">Consumable Billing All Tiers</a> catalog explained above. The only difference is that it uses  <code>tierBlockPolicy=TOP_TIER</code>.</p></div>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>water-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Because <strong>IN_ARREAR</strong> billing mode is specified, the system does not generate an invoice (yet).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>400</code> with date <code>2021-10-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Again, invoice not generated since <strong>IN_ARREAR</strong> billing mode is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$630</code> for <code>2021-09-29</code> to <code>2021-10-29</code>. This is calculated as: <code>30 + (400 x 1.5) = 630</code> (Since <code>400</code> units are consumed, user is charged <code>$1.5</code> per liter as per the first tier)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>1200</code> with date <code>2021-11-01</code>. Trigger invoice dry run with target date <code>2021-11-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$2430</code> for <code>2021-10-29</code> to <code>2021-11-29</code>. This is calculated as: <code>30 + (1200 x 2.0) = 2430</code>  (Since <code>1200</code> units are consumed, user is charged <code>$2.0</code> per liter as per the second tier)</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_capacity_billing">Capacity Billing</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/blob/5d5d7a2219752da8a0d9456cc5a975161388088c/catalogs/capacity-billing.xml">Capacity Billing</a> catalog.  It has a <code>water-monthly</code> plan with a <code>MONTHLY</code> recurring charge of <code>$30</code>. In addition, it also has a usage section with <code>usageType=CAPACITY</code>, and the following <code>tier</code> sections:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Max Limit</th><th class="tableblock halign-left valign-top">Price</th><th class="tableblock halign-left valign-top">Explanation</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">$750.0</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Users will be charged a flat charge of $750 if their units are less than or equal to 1000</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">$500.0</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Users will be charged a flat charge of $500 if their units exceed 1000.</p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>water-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Because <strong>IN_ARREAR</strong> billing mode is specified, the system does not generate an invoice (yet).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>400</code> with date <code>2021-10-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Again, invoice not generated since <strong>IN_ARREAR</strong> billing mode is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$780</code> for <code>2021-09-29</code> to <code>2021-10-29</code>. This is calculated as: <code>30 + 750 = 780</code> (Since <code>400</code> units are consumed, user is charged <code>$750</code> as per the first tier)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>1200</code> with date <code>2021-11-01</code> . Trigger invoice dry run with target date <code>2021-11-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$530</code> for <code>2021-10-29</code> to <code>2021-11-29</code>. This is calculated as: <code>30 + 500 = 530</code> (Since <code>1200</code> units are consumed, user is charged <code>$500</code> as per the second tier)</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_multiple_usage_sections">Multiple Usage Sections</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/tree/a6339c9dd4bb75da375f4755e45aa5c5c07ebe01/catalogs/consumable-billing-multiple-usage-sections.xml">Consumable Billing Multiple Usage Sections</a> catalog. It has a <code>cell-phone-monthly</code> plan with a <code>MONTHLY</code> recurring charge of <code>$30</code>. In addition, it  has two usage sections: <code>cell-phone-minutes-monthly-usage</code> and <code>mbytes-monthly-usage</code>. The <code>cell-phone-minutes-monthly-usage</code> usage section specifies the <code>ALL_TIERS</code> policy while the <code>mbytes-monthly-usage</code> usage section specifies the <code>TOP_TIER</code> policy.</p></div>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>cell-phone-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Because <strong>IN_ARREAR</strong> billing mode is specified, the system does not generate an invoice (yet).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>400</code> for the <code>cell-phone-minutes</code> unitType with date <code>2021-10-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Again, invoice not generated since <strong>IN_ARREAR</strong> billing mode is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$280</code> for <code>2021-09-29</code> to <code>2021-10-29</code>. It has 3 invoice items : <code>cell-phone-monthly-evergreen:$30</code>, <code>mbytes-monthly-usage:$0</code> and <code>cell-phone-minutes-monthly-usage:$250</code> (calculated as: <code>(100 x 1.0) + (300 x 0.5) = 250</code> as per the <code>ALL_TIERS</code> policy).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>1200</code> for the <code>Mbytes</code> unitType with date <code>2021-11-01</code> . Trigger invoice dry run with target date <code>2021-11-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$630</code> for <code>2021-10-29</code> to <code>2021-11-29</code>. It has 3 invoice items : <code>cell-phone-monthly-evergreen:$30</code>, <code>cell-phone-minutes-monthly-usage:$0</code> and <code>mbytes-monthly-usage:$630</code> (calculated as: <code>(1200 x 0.5) = 600</code> as per the <code>TOP_TIER</code> policy).</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_block_size_greater_than_one">Block Size Greater Than One</h3><div class="paragraph"><p>This example uses the <a href="https://github.com/killbill/killbill-docs/tree/a6339c9dd4bb75da375f4755e45aa5c5c07ebe01/catalogs/consumable-billing-block-size-more-than-one.xml">Consumable Billing Block Size More Than One</a> catalog. It has a <code>cell-phone-monthly</code> plan with a <code>MONTHLY</code> recurring charge of <code>$30</code>. In addition, it also has a usage section with <code>usageType=CONSUMABLE</code>, <code>tierBlockPolicy=ALL_TIERS</code> and the following <code>tieredBlock</code> sections:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 20%;"><col style="width: 20%;"><col style="width: 20%;"><col style="width: 20%;"><col style="width: 20%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Unit</th><th class="tableblock halign-left valign-top">Size</th><th class="tableblock halign-left valign-top">Price</th><th class="tableblock halign-left valign-top">Max</th><th class="tableblock halign-left valign-top">Explanation</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">cell-phone-minutes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">$1.00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">A block size <code>10</code> is specified. So, users will be charged at $1.0 per 10 minutes. This is applicable for the for the first <code>100</code> blocks</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">cell-phone-minutes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">$0.5</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Users will be charged at $2.0 per block for any blocks consumed above <code>100</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription for the <code>cell-phone-monthly</code> plan on <code>2021-09-29</code> (current date)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Because <strong>IN_ARREAR</strong> billing mode is specified, the system does not generate an invoice (yet).</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>400</code> with date <code>2021-10-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Again, invoice not generated since <strong>IN_ARREAR</strong> billing mode is specified</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Trigger invoice dry run with target date <code>2021-10-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$70</code> for <code>2021-09-29</code> to <code>2021-10-29</code>. This is calculated as: <code>30 + ((400/100) x 1.0) = 70</code> (Since <code>400</code> minutes (<code>40</code> blocks) are recorded, user is charged <code>$1.0</code> per block as per the first tier)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://killbill.github.io/slate/#usage-record-usage-for-a-subscription">Record a usage</a> of <code>110</code> with date <code>2021-11-01</code>. Trigger invoice dry run with target date <code>2021-11-29</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for  <code>$140</code> for <code>2021-10-29</code> to <code>2021-11-29</code>. This is calculated as: <code>30 + ((1000/100) x 1.0) + ((200/100) X 0.5) = 140</code> (Since <code>1200</code> minutes (<code>120</code> blocks) are recorded, the first <code>100</code> blocked are charged at <code>$1.0</code> per block as per the first tier and the next <code>20</code> blocks are charged at at <code>$0.5</code> per block as per the second tier)</p></td></tr></tbody></table></div></div></div>
<div class="sect1"><h2 id="_versioned_catalogs">Versioned Catalogs</h2><div class="sectionbody"><div class="paragraph"><p>Kill Bill allows modifying the catalog over time. You can do this by creating a set of catalogs, one XML file for each version. Note that all the versions of a catalog need to have the same <code>catalogName</code> but different values for <code>effectiveDate</code>. The system will then rank such files based on their <code>effectiveDate</code> to create the various versions.</p></div>
<div class="paragraph"><p>You can do the following using versioned catalogs:</p></div>
<div class="ulist"><ul><li><p>Add new plans</p></li><li><p>Modify the price for an existing plan</p></li><li><p>Delete plans</p></li></ul></div>
<div class="paragraph"><p>Kill Bill uses the following rules to determine the active catalog version:</p></div>
<div class="ulist"><ul><li><p>When there are multiple versions of a catalog, the catalog with an <code>effectiveDate</code> not later than the current date is treated as the active catalog. So any catalog version with a future <code>effectiveDate</code> is not treated as active until that date is reached.</p></li><li><p>If there are multiple catalog versions with effective dates before the current date, the newest one is considered active.</p></li><li><p>If all the catalog versions have effective dates after the current date, the oldest one is considered active.</p></li><li><p>If there are multiple catalog versions, with the same date component but different time components in the <code>effectiveDate</code>, the one with the earliest time component is considered as active.</p></li><li><p>When there is only one catalog version, the <code>effectiveDate</code> does not matter. So, irrespective of whether it is in the past or in the future, the catalog is treated as the active catalog.</p></li></ul></div>
<div class="paragraph"><p>The subsequent sections provide some examples of versioned catalogs.</p></div>
<div class="sect2"><h3 id="_add_new_plan">Add New Plan</h3><div class="paragraph"><p>It is possible to add a new plan in a newer version of a catalog. The new plan is available only when the current date surpasses the <code>effectiveDate</code> in the new catalog version.</p></div>
<div class="paragraph"><p>This example uses the following catalogs:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Catalog Name</th><th class="tableblock halign-left valign-top">effectiveDate</th><th class="tableblock halign-left valign-top">Plan Details</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/add-new-plan/add-new-plan-v1.xml">add-new-plan-v1.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-01T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$30</code> recurring charge</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/add-new-plan/add-new-plan-v2.xml">add-new-plan-v2.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-15T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$30</code> recurring charge, <code>standard-yearly</code> plan with <code>$540</code> recurring charge.</p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Set the date to <code>2021-01-01</code> and upload the catalogs mentioned above</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription to the <code>standard-monthly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-01-01</code> to <code>2021-02-01</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription to the <code>standard-yearly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Subscription creation fails (Since the <code>standard-yearly</code> plan is not yet active)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Move the clock to <code>2021-02-01</code>.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-02-01</code> to <code>2021-03-01</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription to the <code>standard-yearly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$540</code> for <code>2021-02-01</code> to <code>2022-02-01</code> (Since <code>v2</code> is now active, subscription creation is successful)</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_modify_plan_price_without_affecting_existing_subscriptions">Modify Plan Price Without Affecting Existing Subscriptions</h3><div class="paragraph"><p>It is possible to change the price of a plan in a newer version of a catalog. In such cases, the price change applies only to new subscriptions (subscriptions created after the catalog with the price change is effective). Older subscriptions continue to be billed as per the original price plan.</p></div>
<div class="paragraph"><p>This example uses the following catalogs:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Catalog Name</th><th class="tableblock halign-left valign-top">effectiveDate</th><th class="tableblock halign-left valign-top">Plan Details</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/modify-plan-price-without-effective-date-for-existing-subscriptions/modify-plan-price-without-effective-date-for-existing-sub-v1.xml">modify-plan-price-without-effective-date-for-existing-sub-v1.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-01T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$30</code> recurring charge</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/modify-plan-price-without-effective-date-for-existing-subscriptions/modify-plan-price-without-effective-date-for-existing-sub-v2.xml">modify-plan-price-without-effective-date-for-existing-sub-v2.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-15T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$60</code> recurring charge</p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Set the date to <code>2021-01-01</code> and upload the catalogs mentioned above</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription to the <code>standard-monthly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-01-01</code> to <code>2021-02-01</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Move the clock to <code>2021-02-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-02-01</code> to <code>2021-03-01</code> corresponding to the <code>standard-monthly</code> plan (Although v2 is effective, invoice is generated as per the old price since this is an existing subscription)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create another subscription to the <code>standard-monthly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$60</code> for <code>2021-02-01</code> to <code>2021-03-01</code> corresponding to the <code>standard-monthly</code> plan (Invoice is generated as per the new price since this is a new subscription)</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_modify_plan_price_and_use_new_price_for_existing_subscriptions">Modify Plan Price And Use New Price for Existing Subscriptions</h3><div class="paragraph"><p>As mentioned earlier, when a plan price is changed, it applies only to new subscriptions. If you do need to apply the price change to existing subscriptions, the <code>effectiveDateForExistingSubscriptions</code> attribute needs to be specified corresponding to the plan.</p></div>
<div class="paragraph"><p>This example uses the following catalogs:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Catalog Name</th><th class="tableblock halign-left valign-top">effectiveDate</th><th class="tableblock halign-left valign-top">Plan Details</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/modify-plan-price-with-effective-date-for-existing-subscriptions/modify-plan-price-with-effective-date-existing-sub-v1.xml">modify-plan-price-with-effective-date-existing-sub-v1.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-01T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$30</code> recurring charge</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/modify-plan-price-with-effective-date-for-existing-subscriptions/modify-plan-price-with-effective-date-existing-sub-v2.xml">modify-plan-price-with-effective-date-existing-sub-v2.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2021-01-15T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$60</code> recurring charge. The <code>standard-monthly</code> plan has <code>effectiveDateForExistingSubscriptions=2021-03-01T00:00:00+00:00</code></p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Set the date to <code>2021-01-01</code> and upload both the catalogs mentioned above</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription to the <code>standard-monthly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-01-01</code> to <code>2021-02-01</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Move the clock to <code>2021-02-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-02-01</code> to <code>2021-03-01</code> corresponding to the <code>standard-monthly</code> plan (Although v2 is effective, invoice is generated as per the old price since this is an existing subscription and <code>effectiveDateForExistingSubscriptions</code> is not reached)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Move the clock to  <code>2021-03-01</code></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice generated for <code>$60</code> for <code>2021-03-01</code> to <code>2021-04-01</code> corresponding to the <code>standard-monthly</code> plan (Invoice is generated as per the new price since <code>effectiveDateForExistingSubscriptions</code> is reached)</p></td></tr></tbody></table></div>
<div class="sect2"><h3 id="_retire_plan">Retire Plan</h3><div class="paragraph"><p>It is possible to delete a plan in a newer version of a catalog. In such cases, no new subscriptions can be created corresponding to the plan. However, existing subscriptions continue to be billed as per the original price plan.</p></div>
<div class="paragraph"><p>This example uses the following catalogs:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Catalog Name</th><th class="tableblock halign-left valign-top">effectiveDate</th><th class="tableblock halign-left valign-top">Plan Details</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/retire-plan/retire-plan-v1.xml">retire-plan-v1.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2020-01-01T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-monthly</code> plan with <code>$30</code> recurring charge, <code>standard-weekly</code> plan with <code>$15</code> recurring charge</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/killbill/killbill-docs/blob/5a61ac1957f9174fd4e291c7b61a17c186194388/catalogs/retire-plan/retire-plan-v2.xml">retire-plan-v2.xml</a></p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2021-01-15T00:00:00+00:00</p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><code>standard-weekly</code> plan with <code>$15</code> recurring charge</p></td></tr></tbody></table>
<div class="paragraph"><p>The following table lists the actions and their results:</p></div>
<table class="tableblock frame-all grid-all spread"><colgroup><col style="width: 50%;"><col style="width: 50%;"></colgroup><thead><tr><th class="tableblock halign-left valign-top">Action</th><th class="tableblock halign-left valign-top">Result</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Set the date to <code>2021-01-01</code> and upload the catalogs mentioned above</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create a subscription to the <code>standard-monthly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-01-01</code> to <code>2021-02-01</code> corresponding to the <code>standard-monthly</code> plan</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Move the clock to <code>2021-02-01</code>.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Invoice is generated for <code>$30</code> for <code>2021-02-01</code> to <code>2021-03-01</code> corresponding to the <code>standard-monthly</code> plan (Although v2 is effective and <code>standard-monthly</code> is not present in v2, invoice is generated since this is an existing subscription)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Create another subscription to the <code>standard-monthly</code> plan</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Subscription creation fails since v2 is now active and the <code>standard-monthly</code> plan is not present in v2.</p></td></tr></tbody></table></div></div></div>
<div class="sect1"><h2 id="_additional_information">Additional Information</h2><div class="sectionbody"><div class="paragraph"><p><a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog"><em>Subscription Billing User Guide</em></a></p></div>
<div class="paragraph"><p><a href="https://docs.killbill.io/latest/invoice_subsystem.html"><em>Invoice Subsystem</em></a></p></div></div></div></div></article></div><div class="col-12 col-md-3 col-xl-2"><nav class="bd-links toc right-side-menu" id="toc" data-toggle="toc"></nav></div></div></div></main><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script><script src="https://cdn.staticaly.com/gh/afeld/bootstrap-toc/v1.0.0/dist/bootstrap-toc.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><script src="https://www.googletagmanager.com/gtag/js?id=G-C0HVJ1E78Z"></script><script>
    setTimeout(function(){
      $('.content-wrapper h2, .content-wrapper h3, .content-wrapper h4').append('<a href=""><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>');
      $('.content-wrapper h2, .content-wrapper h3, .content-wrapper h4').each(function(){
        let itemHref = '#' + $(this).attr('id');
        $(this).find('a').attr("href", itemHref);
      })
      $('.content-wrapper table').each(function() {
        $(this).wrap('<div class="table-wrap"></div>')
        $('.table-wrap').each(function() {
          if ($(this).find('table').width() > $(this).width()){
            $(this).css('max-width', '100%');
            $(this).css('overflow-x', 'scroll');
          }
        })
      })
      function copyToClipboard(text) {
        let sampleTextarea = document.createElement("textarea");
        document.body.appendChild(sampleTextarea);
        sampleTextarea.value = text;
        sampleTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(sampleTextarea);
      }
      $('.content-wrapper h2 a, .content-wrapper h3 a, .content-wrapper h4 a').on('click', function(){
        setTimeout(function(){
          copyToClipboard($(location).attr("href"));
        }, 500);
      });
      $('.content-wrapper .note td.icon').append('<img src="https://github.com/killbill/killbill-docs/raw/v3/userguide/assets/img/note-icon.png">');

      $('.content pre').parent('.content').prepend('<div class="copy-icon"><svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 3a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Z" fill="#78AECD"/><path d="M6 3a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2 3 3 0 0 1-3 3H9a3 3 0 0 1-3-3Z" fill="#78AECD"/></svg></div>');
      $('.copy-icon svg').on('click', function () {
        copyToClipboard($(this).parent().next().find('code').text());
      });
    }, 1000);
  </script><script>docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill'});</script><script>window.dataLayer = window.dataLayer || [];
function gtag(){window.dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C0HVJ1E78Z');</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create','UA-32705710-3','auto');
  ga('send','pageview');
  var getOutboundLink = function(url) {
    ga('send', {
      hitType: 'event',
      eventCategory: 'outbound',
      eventAction: 'click',
      eventLabel: url,
      hitCallback: function(){document.location = url;}
    });
  }</script></body></html>